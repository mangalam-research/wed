!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.salve=t():e.salve=t()}(this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){/**
	 * @desc RNG-based validator.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";var a=n(1),r=n(28),i=n(3).EName,s=n(26),o=n(2).NameResolver,l=n(27),h=n(5);t.version="3.0.0",t.Event=a.Event,t.eventsToTreeString=a.eventsToTreeString,t.ReferenceError=a.ReferenceError,t.Grammar=a.Grammar,t.Walker=a.Walker,t.__test=a.__test,t.EName=i,t.ValidationError=s.ValidationError,t.AttributeNameError=s.AttributeNameError,t.AttributeValueError=s.AttributeValueError,t.ElementNameError=s.ElementNameError,t.ChoiceError=s.ChoiceError,t.constructTree=r.constructTree,t.NameResolver=o,t.Name=l.Name,t.NameChoice=l.NameChoice,t.NsName=l.NsName,t.AnyName=l.AnyName,t.HashMap=h.HashMap},function(e,t,n){/**
	 * @desc Classes that model RNG patterns.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";function a(e,t){e.prototype.newWalker=function(e){return new t(this,e)}}function r(e){function t(){return void 0!==t.prototype.__singletonInstance?t.prototype.__singletonInstance:(e.apply(this,arguments),t.prototype.__singletonInstance=this,this)}return t}function i(e){return e.hash()}function s(e){this.id="P"+this.__newID(),this.xmlPath=e}function o(e){s.call(this,e),this.pat=void 0}function l(e){s.call(this,e),this.patA=void 0,this.patB=void 0}function h(){var e;if(arguments[0]instanceof Array)e=arguments[0];else{var t=arguments.length;e=new Array(t);for(var n=0;n<t;++n)e[n]=arguments[n]}var a=e.join(),r=h.__cache[a];return void 0!==r?r:(this.id=this.__newID(),this.params=e,this.key=a,h.__cache[a]=this,this)}function c(e){var t=function(e){return e},n=new re(t);e.forEach(function(e){var a=e;e instanceof h&&(a=e.params);for(var r=n,i=0;i<a.length;++i)if(i===a.length-1)r.add(a[i],!1);else{var s=r.has(a[i]);void 0===s&&(s=new re(t),r.add(a[i],s)),r=s}});var a=function(){var e="",t="    ";return function n(a,r){var i="",s=a.keys();return s.sort(),s.forEach(function(r){var s=a.has(r);s!==!1?(i+=e+r+":\n",e+=t,i+=n(a.has(r)),e=e.slice(t.length)):i+=e+r+"\n"}),i}}();return a(n)}function p(e){this.length=e}function u(){this.id="W"+this.__newID(),this.possibleCached=void 0,this.suppressedAttributes=!1}function m(){throw new Error("not meant to be called")}function f(){throw new Error("not meant to be called")}function d(e){u.call(this),this.possibleCached=new pe}function v(e,t){o.call(this,e),this.pat=t}function y(e,t){u.call(this),this.el=e,this.nameResolver=t,this.subwalker=void 0!==e?e.pat.newWalker(this.nameResolver):void 0,this.seenTokens=!1,this.matched=!1}function b(e,t,n,a,r){if(s.call(this,e),this.type=n||"token",this.datatypeLibrary=a||"",this.ns=r||"",this.datatype=te.get(this.datatypeLibrary).types[this.type],!this.datatype)throw new Error("unkown type: "+n);this.rawValue=t,this._value=void 0}function g(e,t){u.call(this),this.el=e,this.nameResolver=t,this.matched=!1,this.possibleCached=e?new pe(new h("text",e.rawValue)):void 0,this.context=e&&e.datatype.needsContext?{resolver:this.nameResolver}:void 0}function _(e,t,n,a,r){if(s.call(this,e),this.type=t||"token",this.datatypeLibrary=n||"",this.except=r,this.datatype=te.get(this.datatypeLibrary).types[this.type],!this.datatype)throw new Error("unkown type: "+t);this.rngParams=a||[],this._params=void 0}function w(e,t){u.call(this),this.el=e,this.nameResolver=t,this.el&&(this.possibleCached=new pe(new h("text",this.el.datatype.regexp)),this.context=this.el.datatype.needsContext?{resolver:this.nameResolver}:void 0)}function E(e){u.call(this),this.el=e,this.possibleCached=new pe}function x(e){u.call(this),this.possibleCached=new pe(x._textEvent)}function I(e,t){s.call(this,e),this.name=t,this.resolvesTo=void 0}function k(e,t){if(o.call(this,e),void 0!==t){if(1!==t.length)throw new Error("OneOrMore needs exactly one pattern.");this.pat=t[0]}}function A(e,t){u.call(this),this.seenOnce=!1,this.el=e,this.nameResolver=t,this.currentIteration=void 0,this.nextIteration=void 0}function N(e,t){if(l.call(this,e),void 0!==t){if(2!==t.length)throw new Error("ChoiceWalker does not work with Choices that have not exactly 2 elements");this.patA=t[0],this.patB=t[1]}}function S(e,t){u.call(this),this.el=e,this.nameResolver=t,this.chosen=!1,this.walkerA=this.walkerB=void 0,this.instantiatedWalkers=!1}function C(e,t){if(l.call(this,e),void 0!==t){if(2!==t.length)throw new Error("GroupWalkers walk only groups of two elements!");this.patA=t[0],this.patB=t[1]}}function T(e,t){u.call(this),this.el=e,this.nameResolver=t,this.hitA=!1,this.endedA=!1,this.hitB=!1,this.walkerA=this.walkerB=void 0}function P(e,t){if(l.call(this,e),void 0!==t){if(2!==t.length)throw new Error("InterleaveWalkers walk only interleaves of two elements!");this.patA=t[0],this.patB=t[1]}}function M(e,t){u.call(this),this.el=e,this.nameResolver=t,this.inA=!1,this.inB=!1,this.walkerA=this.walkerB=void 0}function R(e,t,n){if(o.call(this,e),this.name=t,void 0!==n){if(1!==n.length)throw new Error("Attribute needs exactly one pattern.");this.pat=n[0]}}function O(e,t){u.call(this),this.el=e,this.nameResolver=t,this.seenName=!1,this.seenValue=!1,this.subwalker=void 0,this.attrNameEvent=e&&new h("attributeName",e.name)}function B(e,t,n){if(o.call(this,e),this.name=t,void 0!==n){if(1!==n.length)throw new Error("Element requires exactly one pattern.");this.pat=n[0]}}function V(e,t){u.call(this),this.el=e,this.nameResolver=t,this.seenName=!1,this.endedStartTag=!1,this.closed=!1,this.walker=void 0,this.startTagEvent=e&&new h("enterStartTag",e.name),this.endTagEvent=void 0,this.boundName=void 0}function F(e,t,n){if(o.call(this,e),this.name=t,void 0!==n){if(1!==n.length)throw new Error("Define needs exactly one pattern.");this.pat=n[0]}}function L(e,t){u.call(this),this.el=e,this.nameResolver=t,this.subwalker=void 0!==e?e.pat.newWalker(this.nameResolver):void 0}function D(e){this.references=e}function $(e,t,n){this.xmlPath=e,this.start=t,this.definitions=Object.create(null),this._elementDefinitions=void 0,this._namespaces=Object.create(null);var a=this;n&&n.forEach(function(e){a.add(e)}),this._resolve(),this._prepare(this._namespaces)}function W(e){u.call(this),this.el=e,this.nameResolver=new j.NameResolver,this.subwalker=void 0!==e?e.start.newWalker(this.nameResolver):void 0,this._misplacedElements=[],this._swallowAttributeValue=!1,this.suspendedWs=void 0,this.ignoreNextWs=!1,this._prevEvWasText=!1,this._swallowAttributeValue=!1}var j=n(2),U=n(3).EName,G=n(4),z=n(5),H=n(6),Z=n(7).Set,K=n(8),Y=n(26),J=Y.ValidationError,q=Y.ElementNameError,X=Y.AttributeNameError,Q=Y.AttributeValueError,ee=Y.ChoiceError,te=K.registry,ne=H.inherit,ae=H.implement,re=z.HashMap,ie=!1;if(ie){var se,oe,le,he,ce=function(e){console.log(e)};!function(){var e="",t=" ",n=function(e){var t=e.el;if(!t)return"";if(void 0===t.name)return" with path "+t.xmlPath;var n=" named "+t.name.toString();return e.boundName?n+" (bound to "+e.boundName.toString()+")":n};he=function(t,a,r){ce(e+t+a+" on class "+r.constructor.name+" id "+r.id+n(r))},se=function(n,a,r){e+=t,he("calling ",a,this);var i=n.apply(this,r);return he("called ",a,this),ce(e+"return from the call: "+G.inspect(i)),e=e.slice(t.length),i},oe=function(n,a,r){e+=t,he("calling ",a,this),ce(e+G.inspect(r[0]));var i=n.apply(this,r);return he("called ",a,this),i!==!1&&ce(e+"return from the call: "+G.inspect(i)),e=e.slice(t.length),i},le=function(n,a,r){e+=t,he("calling ",a,this);var i=n.apply(this,r);return he("called ",a,this),e=e.slice(t.length),i}}()}var pe=Z;ne(s,Object),s.__id=0,s.prototype.__newID=function(){return s.__id++},s.prototype.hash=function(){return this.id},s.prototype._resolve=function(e){},s.prototype._prepare=function(e){},s.prototype.newWalker=function(){throw new Error("must define newWalker method")},s.prototype.clone=function(){return this._clone(new re(i))},s.prototype._clone=function(e){var t=e.has(this);return void 0!==t?t:(t=new this.constructor,e.add(this,t),this._copyInto(t,e),t)},s.prototype._copyInto=function(e,t){e.xmlPath=this.xmlPath},s.prototype._hasAttrs=function(){return!1},s.prototype._gatherElementDefinitions=function(e){},ne(o,s),o.prototype._resolve=function(e){return this.pat._resolve(e)},o.prototype._copyInto=function(e,t){s.prototype._copyInto.call(this,e,t),e.pat=this.pat._clone(t)},o.prototype._prepare=function(e){this.pat._prepare(e)},o.prototype._hasAttrs=function(){return this.pat._hasAttrs()},o.prototype._gatherElementDefinitions=function(e){this.pat._gatherElementDefinitions(e)},ne(l,s),l.prototype._resolve=function(e){var t=this.patA._resolve(e),n=this.patB._resolve(e);return t&&n?t.concat(n):t?t:n},l.prototype._copyInto=function(e,t){s.prototype._copyInto.call(this,e,t),e.patA=this.patA._clone(t),e.patB=this.patB._clone(t)},l.prototype._prepare=function(e){this.patA._prepare(e),this.patB._prepare(e)},l.prototype._hasAttrs=function(){return this.patA._hasAttrs()||this.patB._hasAttrs()},l.prototype._gatherElementDefinitions=function(e){this.patA._gatherElementDefinitions(e),this.patB._gatherElementDefinitions(e)},h.__cache=Object.create(null),h.__id=0,h.prototype.__newID=function(){return h.__id++},h.prototype.hash=function(){return this.id},h.prototype.isAttributeEvent=function(){return"attributeName"===this.params[0]||"attributeValue"===this.params[0]},h.prototype.toString=function(){return"Event: "+this.params.join(", ")};var ue=new h("<empty>");u.__id=0,u.prototype.__newID=function(){return u.__id++},u.prototype.hash=function(){return this.id},u.prototype.possible=function(){return new pe(this._possible())},u.prototype._possible=function(){throw new Error("must be implemented by derived classes")},u.prototype.fireEvent=function(e){throw new Error("must be implemented by derived classes")},u.prototype.canEnd=function(e){return!0},u.prototype.end=function(e){return!1},u.prototype.clone=function(){return this._clone(new re(i))},u.prototype._clone=function(e){var t=new this.constructor;return this._copyInto(t,e),t},u.prototype._cloneIfNeeded=function(e,t){var n=t.has(e);return void 0!==n?n:(n=e.clone(),t.add(e,n),n)},u.prototype._copyInto=function(e,t){e.possibleCached=this.possibleCached,e.suppressedAttributes=this.suppressedAttributes},u.prototype._suppressAttributes=function(){throw new Error("must be implemented by derived classes")},m.prototype._possible=function(e){return this.subwalker.possible()},m.prototype.fireEvent=function(e){return this.subwalker.fireEvent(e)},m.prototype._suppressAttributes=function(){this.suppressedAttributes||(this.suppressedAttributes=!0,this.subwalker._suppressAttributes())},m.prototype.canEnd=function(e){return this.subwalker.canEnd(e)},m.prototype.end=function(e){return this.subwalker.end(e)},f.prototype._suppressAttributes=function(){this.suppressedAttributes=!0},f.prototype.canEnd=function(e){return!0},f.prototype.end=function(e){return!1};var me=r(s);ne(me,s),a(me,d),ne(d,u),ae(d,f),d.prototype.possible=function(){return new pe},d.prototype._possible=function(){return this.possibleCached},d.prototype.fireEvent=function(e){if(e===ue||"text"===e.params[0]&&""===e.params[1].trim())return!1};var fe=r(s);ne(fe,s),a(fe,x),ne(v,o),a(v,y),ne(y,u),ae(y,m),y.prototype._copyInto=function(e,t){u.prototype._copyInto.call(this,e,t),e.el=this.el,e.nameResolver=this._cloneIfNeeded(this.nameResolver,t),e.subwalker=this.subwalker._clone(t),e.seenTokens=this.seenTokens,e.matched=this.matched},y.prototype.fireEvent=function(e){if("text"===e.params[0]){var t=e.params[1].trim();if(""===t)return!1;this.seenTokens=!0;for(var n=t.split(/\s+/),a=0;a<n.length;++a){var r=this.subwalker.fireEvent(new h(e.params[0],n[a]));if(r!==!1)return r}return this.matched=!0,!1}},y.prototype._suppressAttributes=function(){},y.prototype.canEnd=function(e){return this.seenTokens?this.subwalker.canEnd(e):this.subwalker.fireEvent(ue)===!1},y.prototype.end=function(e){var t=this.subwalker.end(e);return t!==!1?t:!this.canEnd(e)&&[new J("unfulfilled list")]},ne(b,s),a(b,g),b.prototype._copyInto=function(e,t){s.prototype._copyInto.call(this,e,t),e.value=this.value,e.rawValue=this.rawValue,e.type=this.type,e.datatypeLibrary=this.datatypeLibrary,e.ns=this.ns,e.datatype=this.datatype,e._value=this._value},Object.defineProperty(b.prototype,"value",{get:function(){var e=this._value;if(e)return e;var t;if(this.datatype.needsContext){var n=new j.NameResolver;n.definePrefix("",this.ns),t={resolver:n}}return e=this._value=this.datatype.parseValue(this.rawValue,t)}}),ne(g,u),g.prototype._copyInto=function(e,t){u.prototype._copyInto.call(this,e,t),e.el=this.el,e.nameResolver=this._cloneIfNeeded(this.nameResolver,t),e.context=this.context?{resolver:e.nameResolver}:void 0,e.matched=this.matched},g.prototype._possible=function(){return this.possibleCached},g.prototype.fireEvent=function(e){if(!this.matched&&"text"===e.params[0]&&this.el.datatype.equal(e.params[1],this.el.value,this.context))return this.matched=!0,this.possibleCached=new pe,!1},g.prototype.canEnd=function(e){return this.matched||""===this.el.rawValue},g.prototype.end=function(e){return!this.canEnd(e)&&[new J("value required: "+this.el.rawValue)]},g.prototype._suppressAttributes=function(){},ne(_,s),a(_,w),_.prototype._copyInto=function(e,t){s.prototype._copyInto.call(this,e,t),e.type=this.type,e.datatypeLibrary=this.datatypeLibrary,e.except=this.except&&this.except._clone(t),e.datatype=this.datatype,e.rngParams=this.rngParams,e._params=this._params},Object.defineProperty(_.prototype,"params",{get:function(){var e=this._params;return e?e:e=this._params=this.datatype.parseParams(this.xmlPath,this.rngParams)}}),ne(w,u),w.prototype._copyInto=function(e,t){u.prototype._copyInto.call(this,e,t),e.el=this.el,e.nameResolver=this._cloneIfNeeded(this.nameResolver,t),e.context=this.context?{resolver:e.nameResolver}:void 0,e.matched=this.matched},w.prototype._possible=function(){return this.possibleCached},w.prototype.fireEvent=function(e){if(!this.matched&&"text"===e.params[0]&&!this.el.datatype.disallows(e.params[1],this.el.params,this.context)){if(this.el.except){var t=this.el.except.newWalker(this.nameResolver),n=t.fireEvent(e);if(n===!1)return}return this.matched=!0,this.possibleCached=new pe,!1}},w.prototype.canEnd=function(e){if(this.matched)return!0;if(this.el.except){var t=this.el.except.newWalker(this.nameResolver);if(t.canEnd())return!1}return!this.el.datatype.disallows("",this.el.params,this.context)},w.prototype.end=function(e){return!this.canEnd(e)&&[new J("value required")]},w.prototype._suppressAttributes=function(){};var de=r(s);ne(de,s),a(de,E),ne(E,u),E.prototype._copyInto=function(e,t){u.prototype._copyInto.call(this,e,t),e.el=this.el},E.prototype.possible=function(){return new pe},E.prototype._possible=function(){return this.possibleCached},E.prototype.fireEvent=function(e){};var ve=r(s);ne(ve,s),a(ve,x),ne(x,u),ae(x,f),x._textEvent=new h("text",/^.*$/),x.prototype._possible=function(){return this.possibleCached},x.prototype.fireEvent=function(e){return"text"!==e.params[0]&&void 0},ne(I,s),I.prototype._prepare=function(){},I.prototype._copyInto=function(e,t){s.prototype._copyInto.call(this,e,t),e.name=this.name,e.resolvesTo=this.resolvesTo},I.prototype._resolve=function(e){if(this.resolvesTo=e[this.name],void 0===this.resolvesTo)return[this]},I.prototype.newWalker=function(e){return this.resolvesTo.pat.newWalker(e)},ne(k,o),a(k,A),ne(A,u),A.prototype._copyInto=function(e,t){u.prototype._copyInto.call(this,e,t),e.seenOnce=this.seenOnce,e.el=this.el,e.nameResolver=this._cloneIfNeeded(this.nameResolver,t),e.currentIteration=void 0!==this.currentIteration?this.currentIteration._clone(t):void 0,e.nextIteration=void 0!==this.nextIteration?this.nextIteration._clone(t):void 0},A.prototype._instantiateCurrentIteration=function(){void 0===this.currentIteration&&(this.currentIteration=this.el.pat.newWalker(this.nameResolver))},A.prototype._instantiateNextIteration=function(){void 0===this.nextIteration&&(this.nextIteration=this.el.pat.newWalker(this.nameResolver),this.suppressedAttributes&&this.nextIteration._suppressAttributes())},A.prototype._possible=function(){if(void 0!==this.possibleCached)return this.possibleCached;if(this._instantiateCurrentIteration(),this.possibleCached=this.currentIteration._possible(),this.currentIteration.canEnd()){this.possibleCached=new pe(this.possibleCached),this._instantiateNextIteration();var e=this.nextIteration._possible(this.nameResolver);this.possibleCached.union(e)}return this.possibleCached},A.prototype.fireEvent=function(e){this.possibleCached=void 0,this._instantiateCurrentIteration();var t=this.currentIteration.fireEvent(e);if(t===!1&&(this.seenOnce=!0),void 0!==t)return t;if(this.seenOnce&&this.currentIteration.canEnd()){if(t=this.currentIteration.end())throw new Error("internal error; canEnd() returns true but end() fails");this._instantiateNextIteration();var n=this.nextIteration.fireEvent(e);return n===!1&&(this.currentIteration=this.nextIteration,this.nextIteration=void 0),n}},A.prototype._suppressAttributes=function(){this._instantiateCurrentIteration(),this.suppressedAttributes||(this.suppressedAttributes=!0,this.possibleCached=void 0,this.currentIteration._suppressAttributes(),this.nextIteration&&this.nextIteration._suppressAttributes())},A.prototype.canEnd=function(e){return e?!this.el.pat._hasAttrs()||(this._instantiateCurrentIteration(),this.currentIteration.canEnd(!0)):this.seenOnce&&this.currentIteration.canEnd()},A.prototype.end=function(e){return!this.canEnd(e)&&(this._instantiateCurrentIteration(),this.nextIteration=void 0,this.currentIteration.end(e))},ne(N,l),a(N,S),ne(S,u),S.prototype._copyInto=function(e,t){u.prototype._copyInto.call(this,e,t),e.el=this.el,e.nameResolver=this._cloneIfNeeded(this.nameResolver,t),e.chosen=this.chosen,e.walkerA=void 0!==this.walkerA?this.walkerA._clone(t):void 0,e.walkerB=void 0!==this.walkerB?this.walkerB._clone(t):void 0,e.instantiatedWalkers=this.instantiatedWalkers},S.prototype._instantiateWalkers=function(){this.instantiatedWalkers||(this.instantiatedWalkers=!0,this.walkerA=this.el.patA.newWalker(this.nameResolver),this.walkerB=this.el.patB.newWalker(this.nameResolver))},S.prototype._possible=function(){if(this._instantiateWalkers(),void 0!==this.possibleCached)return this.possibleCached;if(this.possibleCached=void 0!==this.walkerA?this.walkerA._possible():void 0,void 0!==this.walkerB){this.possibleCached=new pe(this.possibleCached);var e=this.walkerB._possible();this.possibleCached.union(e)}else void 0===this.possibleCached&&(this.possibleCached=new pe);return this.possibleCached},S.prototype.fireEvent=function(e){this._instantiateWalkers(),this.possibleCached=void 0;var t=this.walkerA&&this.walkerA.fireEvent(e),n=this.walkerB&&this.walkerB.fireEvent(e);return void 0!==t?(this.chosen=!0,void 0===n?(this.walkerB=void 0,t):t):void 0!==n?(this.chosen=!0,this.walkerA=void 0,n):void 0},S.prototype._suppressAttributes=function(){this._instantiateWalkers(),this.suppressedAttributes||(this.possibleCached=void 0,this.suppressedAttributes=!0,this.walkerA&&this.walkerA._suppressAttributes(),this.walkerB&&this.walkerB._suppressAttributes())},S.prototype.canEnd=function(e){this._instantiateWalkers();var t=!1,n=!1;return e&&(t=!this.el.patA._hasAttrs(),n=!this.el.patB._hasAttrs()),t=t||!!this.walkerA&&this.walkerA.canEnd(e),n=n||!!this.walkerB&&this.walkerB.canEnd(e),t||n},S.prototype.end=function(e){if(this._instantiateWalkers(),this.canEnd(e))return!1;var t=!!this.walkerA&&this.walkerA.end(e),n=!!this.walkerB&&this.walkerB.end(e);if(!t&&!n)return!1;if(t&&!n)return t;if(!t&&n)return n;var a=[],r=[],i=!1;return this.walkerA.possible().forEach(function(e){"enterStartTag"===e.params[0]?a.push(e.params[1]):i=!0}),i||(this.walkerB.possible().forEach(function(e){"enterStartTag"===e.params[0]?r.push(e.params[1]):i=!0}),i)?t||n:[new ee(a,r)]},ne(C,l),a(C,T),ne(T,u),T.prototype._copyInto=function(e,t){u.prototype._copyInto.call(this,e,t),e.el=this.el,e.nameResolver=this._cloneIfNeeded(this.nameResolver,t),e.hitA=this.hitA,e.endedA=this.endedA,e.hitB=this.hitB,e.walkerA=void 0!==this.walkerA?this.walkerA._clone(t):void 0,e.walkerB=void 0!==this.walkerB?this.walkerB._clone(t):void 0},T.prototype._instantiateWalkers=function(){void 0===this.walkerA&&(this.walkerA=this.el.patA.newWalker(this.nameResolver),this.walkerB=this.el.patB.newWalker(this.nameResolver))},T.prototype._possible=function(){if(this._instantiateWalkers(),void 0!==this.possibleCached)return this.possibleCached;if(this.possibleCached=this.endedA?void 0:this.walkerA._possible(),this.suppressedAttributes)(this.endedA||this.walkerA.canEnd())&&(this.possibleCached=new pe(this.possibleCached),this.possibleCached.union(this.walkerB._possible()));else{var e=this.walkerB._possible();this.endedA&&!this.hitB||this.walkerA.canEnd()||(e=e.filter(function(e){return e.isAttributeEvent()})),this.possibleCached=new pe(this.possibleCached),this.possibleCached.union(e)}return this.possibleCached},T.prototype.fireEvent=function(e){if(this._instantiateWalkers(),this.possibleCached=void 0,!this.endedA){var t=this.walkerA.fireEvent(e);if(void 0!==t)return this.hitA=!0,t;if(!e.isAttributeEvent()&&!this.walkerA.canEnd())return}var n=this.walkerB.fireEvent(e);if(void 0!==n&&(this.hitB=!0),!e.isAttributeEvent()&&void 0!==n&&!this.endedA){var a=this.walkerA.end();this.endedA=!0,n?a&&(n=n.concat(a)):n=a}return n},T.prototype._suppressAttributes=function(){this._instantiateWalkers(),this.suppressedAttributes||(this.possibleCached=void 0,this.suppressedAttributes=!0,this.walkerA._suppressAttributes(),this.walkerB._suppressAttributes())},T.prototype.canEnd=function(e){if(this._instantiateWalkers(),e){var t=this.el.patA._hasAttrs(),n=this.el.patB._hasAttrs();return t&&n?this.walkerA.canEnd(e)&&this.walkerB.canEnd(e):t?this.walkerA.canEnd(!0):!n||this.walkerB.canEnd(!0)}return this.walkerA.canEnd(e)&&this.walkerB.canEnd(e)},T.prototype.end=function(e){if(this.canEnd())return!1;var t;return!this.endedA&&(t=this.walkerA.end(e))?t:(t=this.walkerB.end(e),!!t&&t)},ne(P,l),a(P,M),ne(M,u),M.prototype._copyInto=function(e,t){u.prototype._copyInto.call(this,e,t),e.el=this.el,e.nameResolver=this._cloneIfNeeded(this.nameResolver,t),e.inA=this.inA,e.inB=this.inB,e.walkerA=this.walkerA&&this.walkerA._clone(t),e.walkerB=this.walkerB&&this.walkerB._clone(t)},M.prototype._instantiateWalkers=function(){this.walkerA||(this.walkerA=this.el.patA.newWalker(this.nameResolver)),this.walkerB||(this.walkerB=this.el.patB.newWalker(this.nameResolver))},M.prototype._possible=function(){if(this._instantiateWalkers(),void 0!==this.possibleCached)return this.possibleCached;if(this.inA&&this.inB)throw new Error("impossible state");return this.inA&&!this.walkerA.canEnd()?this.possibleCached=this.walkerA._possible():this.inB&&!this.walkerB.canEnd()&&(this.possibleCached=this.walkerB._possible()),this.possibleCached||(this.possibleCached=this.walkerA.possible(),this.possibleCached.union(this.walkerB._possible())),this.possibleCached},M.prototype.fireEvent=function(e){if(this._instantiateWalkers(),this.possibleCached=void 0,this.inA&&this.inB)throw new Error("impossible state");var t,n;if(!this.inA&&!this.inB)return t=this.walkerA.fireEvent(e),t===!1?(this.inA=!0,!1):(n=this.walkerB.fireEvent(e),n===!1?(this.inB=!0,!1):void 0===n?t:void 0===t?n:t.concat(n));if(this.inA){if(t=this.walkerA.fireEvent(e),t||t===!1)return t;if(n=this.walkerB.fireEvent(e),n===!1)return this.inA=!1,this.inB=!0,!1}else{if(n=this.walkerB.fireEvent(e),n||n===!1)return n;if(t=this.walkerA.fireEvent(e),t===!1)return this.inA=!0,this.inB=!1,!1}},M.prototype._suppressAttributes=function(){this._instantiateWalkers(),this.suppressedAttributes||(this.possibleCached=void 0,this.suppressedAttributes=!0,this.walkerA._suppressAttributes(),this.walkerB._suppressAttributes())},M.prototype.canEnd=function(e){return this._instantiateWalkers(),this.walkerA.canEnd(e)&&this.walkerB.canEnd(e)},M.prototype.end=function(e){this._instantiateWalkers();var t=this.walkerA.end(e),n=this.walkerB.end(e);return t&&!n?t:n&&!t?n:!(!t&&!n)&&t.concat(n)},ne(R,o),a(R,O),R.prototype._copyInto=function(e,t){s.prototype._copyInto.call(this,e,t),e.name=this.name,e.pat=this.pat},R.prototype._prepare=function(e){var t=Object.create(null);this.name._recordNamespaces(t),delete t[""];for(var n=Object.keys(t),a=0;a<n.length;++a){var r=n[a];e[r]=1}},R.prototype._hasAttrs=function(){return!0},ne(O,u),O.prototype._copyInto=function(e,t){u.prototype._copyInto.call(this,e,t),e.el=this.el,e.nameResolver=this._cloneIfNeeded(this.nameResolver,t),e.seenName=this.seenName,e.seenValue=this.seenValue,e.subwalker=this.subwalker&&this.subwalker._clone(t),e.attrNameEvent=this.attrNameEvent},O.prototype._possible=function(){if(this.suppressedAttributes)return new pe;if(!this.seenName)return new pe(this.attrNameEvent);if(!this.seenValue){void 0===this.subwalker&&(this.subwalker=this.el.pat.newWalker(this.nameResolver));var e=this.subwalker._possible(),t=new pe;return e.forEach(function(e){if("text"!==e.params[0])throw new Error("unexpected event type: "+e.params[0]);t.add(new h("attributeValue",e.params[1]))}),t}return new pe},O.prototype.possible=O.prototype._possible,O.prototype.fireEvent=function(e){if(!this.suppressedAttributes)if(this.seenName){if(!this.seenValue&&"attributeValue"===e.params[0]){this.seenValue=!0,this.subwalker||(this.subwalker=this.el.pat.newWalker(this.nameResolver));var t=new h("text",e.params[1]),n=this.subwalker.fireEvent(t);return void 0===n?[new Q("invalid attribute value",this.el.name)]:n instanceof p?[new Q("invalid attribute value",this.el.name)]:(n===!1&&(n=this.subwalker.end()),n)}}else if("attributeName"===e.params[0]&&this.el.name.match(e.params[1],e.params[2]))return this.seenName=!0,!1},O.prototype._suppressAttributes=function(){this.suppressedAttributes=!0},O.prototype.canEnd=function(e){return this.seenValue},O.prototype.end=function(e){return this.seenName?!this.seenValue&&[new Q("attribute value missing",this.el.name)]:[new X("attribute missing",this.el.name)]},ne(B,o),B.prototype._copyInto=function(e,t){o.prototype._copyInto.call(this,e,t),e.name=this.name},B.prototype._prepare=function(e){this.name._recordNamespaces(e),this.pat._prepare(e)},B.prototype.newWalker=function(e){return this.pat instanceof de?this.pat.newWalker(e):new V(this,e)},B.prototype._hasAttrs=function(){return!1},B.prototype._gatherElementDefinitions=function(e){var t=this.name.toString();void 0===e[t]?e[t]=[this]:e[t].push(this)},ne(V,u),V._leaveStartTagEvent=new h("leaveStartTag"),V.prototype._copyInto=function(e,t){u.prototype._copyInto.call(this,e,t),e.el=this.el,e.nameResolver=this._cloneIfNeeded(this.nameResolver,t),e.seenName=this.seenName,e.endedStartTag=this.endedStartTag,e.closed=this.closed,e.walker=void 0!==this.walker?this.walker._clone(t):void 0,e.startTagEvent=this.startTagEvent,e.endTagEvent=this.endTagEvent,e.boundName=this.boundName},V.prototype._possible=function(){if(!this.seenName)return new pe(this.startTagEvent);if(!this.endedStartTag){var e=this.walker._possible(),t=new pe,n=new pe;return e.forEach(function(e){"attributeValue"===e.params[0]?n.add(e):e.isAttributeEvent()&&t.add(e)}),n.size()?t=n:this.walker.canEnd(!0)&&t.add(V._leaveStartTagEvent),t}if(!this.closed){var a=new pe(this.walker._possible());return this.walker.canEnd()&&a.add(this.endTagEvent),a}return new pe},V.prototype.possible=V.prototype._possible,V.prototype.fireEvent=function(e){var t,n,a,r;if(!this.endedStartTag){if(this.seenName){if("leaveStartTag"===e.params[0]){for(this.endedStartTag=!0,n=this.walker.end(!0),t=[],r=0;r<n.length;++r)a=n[r],(a instanceof Q||a instanceof X)&&t.push(a);return 0===t.length&&(t=!1),this.walker._suppressAttributes(),t||!1}}else if("enterStartTag"===e.params[0]&&this.el.name.match(e.params[1],e.params[2]))return this.walker=this.el.pat.newWalker(this.nameResolver),this.seenName=!0,this.boundName=new be.Name("",e.params[1],e.params[2]),this.endTagEvent=new h("endTag",this.boundName),!1;return void 0!==this.walker?this.walker.fireEvent(e):void 0}if(!this.closed){if(t=this.walker.fireEvent(e),void 0===t)if("endTag"===e.params[0]){if(this.boundName.match(e.params[1],e.params[2])){for(this.closed=!0,n=this.walker.end(),t=[],r=0;r<n.length;++r)a=n[r],a instanceof Q||a instanceof X||t.push(a);return 0!==t.length&&t}}else if("leaveStartTag"===e.params[0])return[new J("unexpected leaveStartTag event; it is likely that fireEvent is incorrectly called")];return t}},V.prototype._suppressAttributes=function(){},V.prototype.canEnd=function(e){return!!e||this.closed},V.prototype.end=function(e){if(e)return!1;var t=[];if(this.seenName){if(!this.endedStartTag||!this.closed){if(void 0!==this.walker){var n=this.walker.end();n&&(t=n)}t.push(this.endedStartTag?new q("tag not closed",this.el.name):new q("start tag not terminated",this.el.name))}}else t.push(new q("tag required",this.el.name));return t.length>0&&t},ne(F,o),a(F,L),F.prototype._copyInto=function(e,t){o.prototype._copyInto.call(this,e,t),e.name=this.name},ne(L,u),ae(L,m),L.prototype._copyInto=function(e,t){u.prototype._copyInto.call(this,e,t),e.el=this.el,e.nameResolver=this._cloneIfNeeded(this.nameResolver,t),e.subwalker=this.subwalker._clone(t)},ne(D,Error),D.prototype.toString=function(){return"Cannot resolve the following references: "+this.references.toString()},$.prototype.definitions=void 0,$.prototype.start=void 0,$.prototype._resolve=function(){var e,t=[];for(var n in this.definitions)e=this.definitions[n]._resolve(this.definitions),e&&(t=t.concat(e));if(e=this.start._resolve(this.definitions),e&&(t=t.concat(e)),t.length)throw new D(t)},$.prototype.add=function(e){this.definitions[e.name]=e,"start"===e.name&&(this.start=e)},$.prototype._prepare=function(e){this.start._prepare(e);for(var t in this.definitions)this.definitions[t]._prepare(e)},$.prototype._gatherElementDefinitions=function(e){for(var t in this.definitions)this.definitions[t]._gatherElementDefinitions(e)},Object.defineProperty($.prototype,"elementDefinitions",{get:function(){var e=this._elementDefinitions;return e?e:(e=this._elementDefinitions=Object.create(null),this._gatherElementDefinitions(e),e)}}),$.prototype.whollyContextIndependent=function(){var e=this.elementDefinitions;for(var t in e)if(e[t].length>1)return!1;return!0},$.prototype.getNamespaces=function(){return Object.keys(this._namespaces)},a($,W),ne(W,u),ae(W,m),W.prototype.subwalker=void 0,W.prototype._copyInto=function(e,t){u.prototype._copyInto.call(this,e,t),e.el=this.el,e.subwalker=this.subwalker._clone(t),e._misplacedElements=[];for(var n=0;n<this._misplacedElements.length;++n){var a=this._misplacedElements[n];e._misplacedElements.push(a instanceof u?a._clone(t):a.concat([]))}e._swallowAttributeValue=this._swallowAttributeValue,e.nameResolver=this._cloneIfNeeded(this.nameResolver,t),e.suspendedWs=this.suspendedWs,e.ignoreNextWs=this.ignoreNextWs,e._prevEvWasText=this._prevEvWasText},W.prototype.resolveName=function(e,t){return this.nameResolver.resolveName(e,t)},W.prototype.unresolveName=function(e,t){return this.nameResolver.unresolveName(e,t)},W.prototype.fireEvent=function(e){function t(e){if(void 0===r&&(r=[new J("text not allowed here")]),r===!1)return e;if(e===!1)return r;if(void 0===e)throw new Error("undefined x");return r.concat(e)}if("enterContext"===e.params[0]||"leaveContext"===e.params[0]||"definePrefix"===e.params[0]){switch(e.params[0]){case"enterContext":this.nameResolver.enterContext();break;case"leaveContext":this.nameResolver.leaveContext();break;case"definePrefix":this.nameResolver.definePrefix(e.params[1],e.params[2]);break;default:throw new Error("unexpected event: "+e.params[0])}return!1}if("text"===e.params[0]&&""===e.params[1].trim())return this.suspendedWs?this.suspendedWs+=e.params[1]:this.suspendedWs=e.params[1],!1;var n=this._misplacedElements.length>0&&this._misplacedElements[0]instanceof u?this._misplacedElements[0]:this.subwalker,a=this.ignoreNextWs;this.ignoreNextWs=!1;var r=!1;switch(e.params[0]){case"enterStartTag":this.suspendedWs=void 0;break;case"text":if(this._prevEvWasText)throw new Error("fired two text events in a row: this is disallowed by salve");if(this.ignoreNextWs){this.suspendedWs=void 0;var i=e.params[1].replace(/^\s+/,"");i.length!==e.params[1].length&&(e=new h("text",i))}else this.suspendedWs&&(r=n.fireEvent(new h("text",this.suspendedWs)),this.suspendedWs=void 0);break;case"endTag":this.ignoreNextWs=!0;default:this.suspendedWs&&!a&&(r=n.fireEvent(new h("text",this.suspendedWs))),this.suspendedWs=void 0}if(this._prevEvWasText="text"===e.params[0],this._misplacedElements.length>0&&this._misplacedElements[0]instanceof Array){var s=this._misplacedElements[0];switch(e.params[0]){case"enterStartTag":s.unshift(e.params.slice(1));break;case"endTag":s.shift()}return s.length||this._misplacedElements.shift(),!1}if(this._swallowAttributeValue)return this._swallowAttributeValue=!1,"attributeValue"!==e.params[0]&&[new J("attribute value required")];
var o=n.fireEvent(e);if(o instanceof p){if("text"!==e.params[0])throw new Error("got PartialMatch when firing a non-text event");var l=new h("text",e.params[1].slice(o.length));return this.fireEvent(l)}if(void 0===o)switch(e.params[0]){case"enterStartTag":var c=new be.Name("",e.params[1],e.params[2]);o=[new q("tag not allowed here",c)];var m=this.el.elementDefinitions[c.toString()];if(m&&1===m.length){var f=m[0].newWalker(this.nameResolver);if(this._misplacedElements.unshift(f),f.fireEvent(e)!==!1)throw new Error("internal error: the infered element does not accept its initial event")}else this._misplacedElements.unshift([e.params.slice(1)]);break;case"endTag":o=[new q("unexpected end tag",new be.Name("",e.params[1],e.params[2]))];break;case"attributeName":o=[new X("attribute not allowed here",new be.Name("",e.params[1],e.params[2]))],this._swallowAttributeValue=!0;break;case"attributeValue":o=[new J("unexpected attributeValue event; it is likely that fireEvent is incorrectly called")];break;case"text":o=[new J("text not allowed here")];break;case"leaveStartTag":default:throw new Error("unexpected event type in GrammarWalker's fireEvent: "+e.params[0])}if(this._misplacedElements.length>0&&this._misplacedElements[0]instanceof u&&(n=this._misplacedElements[0],n.canEnd())){this._misplacedElements.shift();var d=n.end();d&&(o=o?o.concat(d):d)}return t(o)},W.prototype.possible=function(e){if(this._misplacedElements.length){var t=this._misplacedElements[0];return t instanceof u?t.possible():new pe}return this.subwalker.possible()},W.prototype._suppressAttributes=function(){throw new Error("_suppressAttributes cannot be called on a GrammarWalker")},t.Event=h,t.eventsToTreeString=c,t.ReferenceError=D,t.Grammar=$,t.Walker=u;var ye={};ye.GrammarWalker=W,ye.Text=ve,t.__test=function(){return ye};var be=n(27);t.__protected={Empty:me,Data:_,List:v,Param:fe,Value:b,NotAllowed:de,Text:ve,Ref:I,OneOrMore:k,Choice:N,Group:C,Attribute:R,Element:B,Define:F,Grammar:$,EName:U,Interleave:P,Name:be.Name,NameChoice:be.NameChoice,NsName:be.NsName,AnyName:be.AnyName}},function(e,t,n){/**
	 * @desc Implements a name resolver for handling namespace changes in XML.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";function a(){this.id="N"+this.__newID(),this._contextStack=[],this.enterContext(),this._contextStack[0].forward.xml=i,this._contextStack[0].backwards[i]=["xml"],this._contextStack[0].forward.xmlns=s,this._contextStack[0].backwards[s]=["xmlns"]}var r=n(3).EName,i="http://www.w3.org/XML/1998/namespace",s="http://www.w3.org/2000/xmlns/";a.__id=0,a.prototype.__newID=function(){return a.__id++},a.prototype.hash=function(){return this.id},a.prototype.clone=function(){var e=new a;return e._contextStack=this._contextStack.slice(),e},a.prototype.definePrefix=function(e,t){if("xmlns"===e)throw new Error("trying to define 'xmlns' but the XML Namespaces standard stipulates that 'xmlns' cannot be declared (= \"defined\")");if("xml"===e&&t!==i)throw new Error("trying to define 'xml' to an incorrect URI");this._contextStack[0].forward[e]=t;var n=this._contextStack[0].backwards[t];void 0===n&&(n=this._contextStack[0].backwards[t]=[]),""===e?n.unshift(""):n.push(e)},a.prototype.enterContext=function(){this._contextStack.unshift(Object.create(null)),this._contextStack[0].forward=Object.create(null),this._contextStack[0].backwards=Object.create(null)},a.prototype.leaveContext=function(){if(!(this._contextStack.length>1))throw new Error("trying to leave the default context");this._contextStack.shift()},a.prototype.resolveName=function(e,t){void 0===t&&(t=!1);var n=e.split(":");if(1===n.length){if(t)return new r("",e);n=["",e]}if(n.length>2)throw new Error("invalid name passed to resolveName");for(var a,i=0;void 0===a&&i<this._contextStack.length;++i){var s=this._contextStack[i];a=s.forward[n[0]]}return void 0===a?""===n[0]?new r("",n[1]):void 0:new r(a,n[1])},a.prototype.unresolveName=function(e,t){if(""===e)return t;for(var n,a=0;void 0===n&&a<this._contextStack.length;++a){var r=this._contextStack[a];n=r.backwards[e]}if(void 0!==n){var i=n[0];return""!==i?i+":"+t:t}},a.prototype.prefixFromURI=function(e){for(var t,n=0;void 0===t&&n<this._contextStack.length;++n){var a=this._contextStack[n];t=a.backwards[e]}if(void 0!==t){var r=t[0];return r}},t.NameResolver=a,t.XML1_NAMESPACE=i},function(e,t){/**
	 * @desc Class for XML Expanded Names.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";function n(e,t){this.ns=e,this.name=t}n.prototype.toString=function(){return"{"+this.ns+"}"+this.name},n.prototype.equal=function(e){return this.ns===e.ns&&this.name===e.name},t.EName=n},function(e,t){/**
	 * @desc A mock implementation of Node's util package. This module
	 * implements only what is actually used in salve.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";t.inspect=function(e){return e}},function(e,t,n){/**
	 * @desc {@link module:hashstructs.HashSet HashSet} and {@link
	 * module:hashstructs.HashMap HashMap} implementations. This module is meant for
	 * salve's internal purposes only. It may be yanked at any time. Do not use in
	 * your own code.
	 *
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 * @private
	 */
"use strict";function a(e,t){if(this.hashF=e,this.backing=Object.create(null),this._size=0,void 0!==t)if(t instanceof a){for(var n=this.backing,r=t.backing,i=Object.keys(r),s=0;s<i.length;++s){var o=i[s];n[o]=r[o]}this._size=i.length}else if(t instanceof Array)for(var l=0;l<t.length;++l)this.add(t[l]);else this.add(t)}function r(){a.apply(this,arguments)}function i(e,t){if(t instanceof Array)throw new Error("cannot initialize a map with an array");a.apply(this,arguments)}var s=n(6).inherit;a.prototype.hashF=void 0,a.prototype.backing=void 0,a.prototype._size=0,a.prototype._store=function(e,t){if(void 0===e||null===e)throw new Error("undefined or null hash");void 0===this.backing[e]&&(this.backing[e]=t,this._size++)},a.prototype.union=function(e){if(null!==e&&void 0!==e){if(!(e instanceof this.constructor))throw new Error("union invalid class object; my class "+this.constructor.name+" other class "+e.constructor.name);for(var t=e.backing,n=Object.keys(t),a=0;a<n.length;++a){var r=n[a];this._store(r,t[r])}}},a.prototype.forEach=function(e){for(var t=this.backing,n=Object.keys(t),a=0;a<n.length;++a){var r=n[a];e(t[r])}},a.prototype.size=function(){return this._size},a.prototype.filter=function(e){var t=new this.constructor;void 0===t.hashF&&(t.hashF=this.hashF);for(var n=this.backing,a=Object.keys(n),r=0;r<a.length;++r){var i=a[r],s=n[i],o=s instanceof Array?s:[s];e.apply(void 0,o)&&t._store(i,s)}return t},a.prototype.has=function(e){var t=this.hashF(e);return!!this.backing[t]},a.prototype.toString=function(){return this.toArray().join(", ")},a.prototype.toArray=function(){for(var e=[],t=this.backing,n=Object.keys(t),a=0;a<n.length;++a){var r=n[a];e.push(t[r])}return e},s(r,a),r.prototype.add=function(e){this._store(this.hashF(e),e)},s(i,a),i.prototype.add=function(e,t){this._store(this.hashF(e),[e,t])},i.prototype.forEach=function(e){for(var t=this.backing,n=Object.keys(t),a=0;a<n.length;++a){var r=n[a];e(t[r][0],t[r][1])}},i.prototype.has=function(e){var t=this.hashF(e),n=this.backing[t];if(void 0!==n)return n[1]},i.prototype.keys=function(){return Object.keys(this.backing)},t.HashSet=r,t.HashMap=i},function(e,t){/**
	 * @desc OOP utilities
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e}function a(e,t){for(var n in t.prototype)({}).hasOwnProperty.call(t.prototype,n)&&(e.prototype[n]=t.prototype[n])}t.inherit=n,t.implement=a},function(e,t){/**
	 * @desc Naive set implementation.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";function n(e){if(void 0!==e)if(e instanceof n)this.b=e.b.concat([]);else if(e instanceof Array){this.b=[];for(var t=0;t<e.length;++t)this.add(e[t])}else this.b=[e];else this.b=[]}n.prototype.b=void 0,n.prototype.add=function(e){var t=this.b.indexOf(e);t<0&&this.b.push(e)},n.prototype.union=function(e){if(null!==e&&void 0!==e){if(!(e instanceof n))throw new Error("union with non-Set");for(var t=e.b.length,a=0;a<t;++a)this.add(e.b[a])}},n.prototype.filter=function(e){var t=new this.constructor;return t.b=this.b.filter(e),t},n.prototype.map=function(e){for(var t=new this.constructor,n=0;n<this.b.length;++n){var a=e(this.b[n]);void 0!==a&&t.add(a)}return t},n.prototype.forEach=function(e){this.b.forEach(e)},n.prototype.toString=function(){return this.b.join(", ")},n.prototype.size=function(){return this.b.length},n.prototype.has=function(e){return this.b.indexOf(e)>=0},n.prototype.toArray=function(){return this.b.slice()},t.Set=n},function(e,t,n){/**
	 * @desc Classes that model datatypes used in RNG schemas.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 *
	 */
"use strict";function a(){this.libraries=Object.create(null)}var r=n(9).builtin,i=n(12).xmlschema,s=n(11);a.prototype.add=function(e){var t=e.uri;if(t in this.libraries)throw new Error("URI clash: "+t);this.libraries[t]=e},a.prototype.find=function(e){return this.libraries[e]},a.prototype.get=function(e){var t=this.find(e);if(!t)throw new Error("can't get library with URI: "+e);return t};var o=new a;o.add(r),o.add(i),t.registry=o,t.ParameterParsingError=s.ParameterParsingError,t.ValueValidationError=s.ValueValidationError,t.ValueError=s.ValueError},function(e,t,n){/**
	 * @desc Implementation of the builtin Relax NG datatype library.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";function a(e){return e.trim().replace(/\s{2,}/g," ")}var r=n(10).extend,i=n(11),s=i.ParameterParsingError,o=i.ParamError,l=i.ValueValidationError,h={parseParams:function(e,t){if(t&&t.length>0)throw new s(e,new o("this type does not accept parameters"))},parseValue:function(e,t){var n=this.disallows(e,[],t);if(n.length)throw new l(n);return{value:e}}},c=r({},h,{equal:function(e,t,n,a){if(void 0===t.value)throw Error("it looks like you are trying to use an unparsed value");return e===t.value},disallows:function(e,t,n){return!1},regexp:/.*/,needsContext:!1}),p=r({},h,{equal:function(e,t,n){if(void 0===t.value)throw Error("it looks like you are trying to use an unparsed value");return a(e)===a(t.value)},disallows:function(e,t,n){return!1},regexp:/.*/,needsContext:!1}),u={uri:"",types:{string:c,token:p}};t.builtin=u},function(e,t){/**
	 * @desc Common tools for salve.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";function n(e,t){for(var n in t)e[n]=t[n]}function a(){for(var e=arguments[0],t=arguments.length,a=1;a<t;++a)n(e,arguments[a]);return e}t.extend=a},function(e,t,n){/**
	 * @desc Errors that can be raised during parsing of types.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";function a(e){this.message=e}function r(e){this.message=e}function i(e,t){var n=e+": "+t.map(function(e){return e.toString()}).join("\n"),a=new Error(n);this.errors=t,this.name="ParameterParsingError",this.stack=a.stack,this.message=a.message}function s(e){var t=e.map(function(e){return e.toString()}).join("\n"),n=new Error(t);this.errors=e,this.name="ValueValidationError",this.stack=n.stack,this.message=n.message}var o=n(6);a.prototype.toString=function(){return this.message},r.prototype.toString=function(){return this.message},o.inherit(i,Error),o.inherit(s,Error),t.ParamError=a,t.ValueError=r,t.ParameterParsingError=i,t.ValueValidationError=s},function(e,t,n){/**
	 * @desc Implementation of the XMLSchema datatypes.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";function a(e,t){return e.search(/^\d+$/)===-1&&new _(t+" must have an integer value")}function r(e,t){return!(!a(e,t)&&Number(e)>=0)&&new _(t+" must have a non-negative integer value")}function i(e,t){return!(!a(e,t)&&Number(e)>0)&&new _(t+" must have a positive value")}function s(e,t){switch(t){case m:break;case f:e=e.replace(/\r\n\t/g," ");break;case d:e=e.replace(/\r\n\t/g," ").trim().replace(/\s{2,}/g," ");break;default:throw new Error("unexpected value: "+t)}return e}function o(e){return e%4===0&&e%100!==0||e%400===0}function l(e){var t=e.match(Ve);if(!t)return NaN;var n=t[1],a=o(Number(n)),r=Number(t[2]);if(0===r||r>12)return NaN;var i=Number(t[3]),s=Fe[r];if(2!==r||a||(s=28),0===i||i>s)return NaN;var l=t[4].split(":"),h=Number(l[1]);if(h>59)return NaN;var c=Number(l[2]);if(c>59)return NaN;var p=h||c?23:24;if(Number(l[0])>p)return NaN;if(t[5]&&"Z"!==t[5]){var u=t[5].split(":"),m=Number(u[0].slice(1));if(m>14)return NaN;var f=Number(u[1]);if(f>59)return NaN;if(14===m&&0!==f)return NaN}return!0}var h=n(10).extend,c=n(11),p=n(13),u=n(16),m=1,f=2,d=3,v=u.xmlNameRe,y=u.xmlNcname,b=u.xmlNcnameRe,g=u.xmlNameChar,_=c.ParamError,w=c.ValueError,E=c.ParameterParsingError,x=c.ValueValidationError,I={name:"length",repeatable:!1,convert:Number,isInvalidParam:r,isInvalidValue:function(e,t,n){return n.valueLength(e)!==t&&new w("length of value should be "+t)}},k={name:"minLength",repeatable:!1,convert:Number,isInvalidParam:r,isInvalidValue:function(e,t,n){return!(n.valueLength(e)>=t)&&new w("length of value should be greater than or equal to "+t)}},A={name:"maxLength",repeatable:!1,convert:Number,isInvalidParam:r,isInvalidValue:function(e,t,n){return!(n.valueLength(e)<=t)&&new w("length of value should be less than or equal to "+t)}},N=Object.create(null),S={name:"pattern",repeatable:"combine",convert:function(e){var t=N[e];return void 0===t&&(t=N[e]=p.parse(e)),{rng:e,internal:t}},combine:function(e){return e.map(this.convert)},isInvalidParam:function(e){try{this.convert(e)}catch(e){if(e instanceof p.SalveParsingError)return new _(e.message);throw e}return!1},isInvalidValue:function(e,t,n){if(t instanceof Array){for(var a,r=0;!a&&r<t.length;++r)t[r].internal.test(e)||(a=t[r]);return!!a&&new w("value does not match the pattern "+a.rng)}return!t.internal.test(e)&&new w("value does not match the pattern "+t.rng)}},C={name:"totalDigits",repeatable:!1,convert:Number,isInvalidParam:i,isInvalidValue:function(e,t,n){var a=String(Number(e)).replace(/[-+.]/g,"");return a.length>t&&new w("value must have at most "+t+" digits")}},T={name:"fractionDigits",repeatable:!1,convert:Number,isInvalidParam:r,isInvalidValue:function(e,t,n){var a=String(Number(e)).replace(/^.*\./,"");return a.length>t&&new w("value must have at most "+t+" fraction digits")}},P={name:"maxInclusive",repeatable:!1,convert:Number,isInvalidParam:function(e,t,n){return n.disallows(e)},isInvalidValue:function(e,t,n){return e>t&&new w("value must be less than or equal to "+t)}},M={name:"maxExclusive",repeatable:!1,convert:Number,isInvalidParam:function(e,t,n){return n.disallows(e)},isInvalidValue:function(e,t,n){return e>=t&&new w("value must be less than "+t)}},R={name:"minInclusive",repeatable:!1,convert:Number,isInvalidParam:function(e,t,n){return n.disallows(e)},isInvalidValue:function(e,t,n){return e<t&&new w("value must be greater than or equal to "+t)}},O={name:"minExclusive",repeatable:!1,convert:Number,isInvalidParam:function(e,t,n){return n.disallows(e)},isInvalidValue:function(e,t,n){return e<=t&&new w("value must be greater than "+t)}},B={init:function(){if(this.validParams){this.paramNameToObj=Object.create(null);for(var e=0;e<this.validParams.length;++e){var t=this.validParams[e];this.paramNameToObj[t.name]=t}}this.defaultParams=this.parseParams()},whiteSpaceDefault:d,convertValue:function(e,t){return s(e,this.whiteSpaceDefault)},valueLength:function(e){return e.length},parseValue:function(e,t){var n=this.disallows(e,{},t);if(n.length)throw new x(n);return{value:this.convertValue(e,t)}},parseParams:function(e,t){var n=this,a=[],r=Object.create(null);if(t=t||[],t.forEach(function(e){var t=e.name;if(!n.paramNameToObj[t])return void a.push(new _("unexpected parameter: "+t));var i=n.paramNameToObj[t],s=i.isInvalidParam(e.value,t,n);s&&a.push(s),r[t]&&!i.repeatable&&a.push(new _("cannot repeat parameter "+t));var o=r[t];o||(o=r[t]=[]),o.push(e.value)}),a.length)throw new E(e,a);var i=r;if(Object.keys(i).forEach(function(e){var t=i[e],a=n.paramNameToObj[e];t.length>1?i[e]=a.combine(t):i[e]=a.convert?a.convert(t[0]):t[0]}),i.minLength>i.maxLength&&a.push(new _("minLength must be less than or equal to maxLength")),void 0!==i.length&&(void 0!==i.minLength&&a.push(new _("length and minLength cannot appear together")),void 0!==i.maxLength&&a.push(new _("length and maxLength cannot appear together"))),void 0!==i.maxInclusive&&(void 0!==i.maxExclusive&&a.push(new _("maxInclusive and maxExclusive cannot appear together")),i.minExclusive>=i.maxInclusive&&a.push(new _("minExclusive must be less than maxInclusive"))),void 0!==i.minInclusive&&(void 0!==i.minExclusive&&a.push(new _("minInclusive and minExclusive cannot appear together")),i.minInclusive>i.maxInclusive&&a.push(new _("minInclusive must be less than or equal to maxInclusive")),i.minInclusive>=i.maxExclusive&&a.push(new _("minInclusive must be less than maxExclusive"))),i.minExclusive>i.maxExclusive&&a.push(new _("minExclusive must be less than or equal to maxExclusive")),a.length)throw new E(e,a);return i},disallowedByParams:function(e,t,n,a){var r=this;if(n){var i=[];if(Object.keys(n).forEach(function(e){var a=r.paramNameToObj[e],s=a.isInvalidValue(t,n[e],r);s&&i.push(s)}),i.length)return i}return!1},equal:function(e,t,n){if(void 0===t.value)throw Error("it looks like you are trying to use an unparsed value");var a;try{a=this.convertValue(e,n)}catch(e){if(e instanceof x)return!1;throw e}return a===t.value},disallows:function(e,t,n){if(t instanceof Array)throw new Error("it looks like you are passing unparsed parameters to disallows");if(t&&0!==Object.keys(t).length||(t=this.defaultParams),this.regexp&&!s(e,d).match(this.regexp))return[new w(this.typeErrorMsg)];var a;try{a=this.convertValue(e,n)}catch(e){if(e instanceof x)return e.errors;throw e}var r=this.disallowedByParams(e,a,t,n);return!!r.length&&r}},V=h({},B,{name:"string",typeErrorMsg:"value is not a string",whiteSpaceDefault:m,validParams:[I,k,A,S],needsContext:!1,regexp:/^.*$/}),F=h({},V,{name:"normalizedString",typeErrorMsg:"string contains a tab, carriage return or newline",regexp:/^[^\r\n\t]+$/}),L=h({},F,{name:"token",typeErrorMsg:"not a valid token",regexp:/^(?:(?! )(?:(?! {3})[^\r\n\t])*[^\r\n\t ])?$/}),D=h({},L,{name:"language",typeErrorMsg:"not a valid language identifier",regexp:/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/}),$=h({},L,{name:"Name",typeErrorMsg:"not a valid Name",regexp:v}),W=h({},$,{name:"NCName",typeErrorMsg:"not a valid NCName",regexp:b}),j=new RegExp("^["+g+"]+$"),U=h({},L,{name:"NMTOKEN",typeErrorMsg:"not a valid NMTOKEN",regexp:j}),G=new RegExp("^["+g+"]+(?: ["+g+"]+)*$"),z=h({},U,{name:"NMTOKENS",typeErrorMsg:"not a valid NMTOKENS",regexp:G,whiteSpaceDefault:d}),H=h({},W,{name:"ID",typeErrorMsg:"not a valid ID"}),Z=h({},W,{name:"IDREF",typeErrorMsg:"not a valid IDREF"}),K=new RegExp("^"+y+"(?: "+y+")*$"),Y=h({},Z,{name:"IDREFS",typeErrorMsg:"not a valid IDREFS",regexp:K,whiteSpaceDefault:d}),J=h({},V,{name:"ENTITY",typeErrorMsg:"not a valid ENTITY"}),q=h({},V,{name:"ENTITIES",typeErrorMsg:"not a valid ENTITIES"}),X="[-+]?(?!$)\\d*(\\.\\d*)?",Q=h({},B,{name:"decimal",typeErrorMsg:"value not a decimal number",regexp:new RegExp("^"+X+"$"),whiteSpaceDefault:d,convertValue:function(e,t){return Number(B.convertValue(e))},validParams:[C,T,S,O,R,M,P],needsContext:!1}),ee="[-+]?\\d+",te=h({},Q,{name:"integer",typeErrorMsg:"value is not an integer",regexp:new RegExp("^"+ee+"$"),validParams:[C,S,O,R,M,P],parseParams:function(e,t){var n,a,r=Q.parseParams(e,t);if(void 0!==this.highestVal)if(void 0!==r.maxExclusive){if(n=r.maxExclusive,n>this.highestVal)throw new E(e,[new _("maxExclusive cannot be greater than "+this.highestVal)])}else if(void 0!==r.maxInclusive){if(a=r.maxInclusive,a>this.highestVal)throw new E(e,[new _("maxInclusive cannot be greater than "+this.highestVal)])}else r.maxInclusive=this.highestVal;if(void 0!==this.lowestVal)if(void 0!==r.minExclusive){if(n=r.minExclusive,n<this.lowestVal)throw new E(e,[new _("minExclusive cannot be lower than "+this.lowestVal)])}else if(void 0!==r.minInclusive){if(a=r.minInclusive,a<this.lowestVal)throw new E(e,[new _("minInclusive cannot be lower than "+this.lowestVal)])}else r.minInclusive=this.lowestVal;return r}}),ne=h({},te,{name:"nonPositiveInteger",typeErrorMsg:"value is not a nonPositiveInteger",regexp:/^\+?0+|-\d+$/,highestVal:0,validParams:[C,S,O,R,M,P]}),ae=h({},ne,{name:"negativeInteger",typeErrorMsg:"value is not a negativeInteger",regexp:/^-\d+$/,highestVal:-1,validParams:[C,S,O,R,M,P]}),re=h({},te,{name:"nonNegativeInteger",typeErrorMsg:"value is not a nonNegativeInteger",regexp:/^\+?\d+$/,lowestVal:0,validParams:[C,S,O,R,M,P]}),ie=h({},re,{name:"positiveInteger",typeErrorMsg:"value is not a positiveInteger",regexp:/^\+?\d+$/,lowestVal:1,validParams:[C,S,O,R,M,P]}),se=h({},te,{name:"long",typeErrorMsg:"value is not a long",highestVal:0x8000000000000000,lowestVal:-0x8000000000000000,validParams:[C,S,O,R,M,P]}),oe=h({},se,{name:"int",typeErrorMsg:"value is not an int",highestVal:2147483647,lowestVal:-2147483648}),le=h({},oe,{name:"short",typeErrorMsg:"value is not a short",highestVal:32767,lowestVal:-32768}),he=h({},le,{name:"byte",typeErrorMsg:"value is not a byte",highestVal:127,lowestVal:-128}),ce=h({},re,{name:"unsignedLong",typeErrorMsg:"value is not an unsignedLong",highestVal:0x10000000000000000,validParams:[C,S,O,R,M,P]}),pe=h({},ce,{name:"unsignedInt",typeErrorMsg:"value is not an unsignedInt",highestVal:4294967295,validParams:[C,S,O,R,M,P]}),ue=h({},pe,{name:"unsignedShort",typeErrorMsg:"value is not an unsignedShort",highestVal:65535,validParams:[C,S,O,R,M,P]}),me=h({},ue,{name:"unsignedShort",typeErrorMsg:"value is not an unsignedByte",highestVal:255,validParams:[C,S,O,R,M,P]}),fe=h({},B,{name:"boolean",typeErrorMsg:"not a valid boolean",regexp:/^(1|0|true|false)$/,validParams:[S],convertValue:function(e,t){return"1"===e||"true"===e}}),de="[AQgw]",ve="[AEIMQUYcgkosw048]",ye="[A-Za-z0-9+/]",be="(?:"+ye+" ?)",ge="(?:"+ve+" ?)",_e="(?:"+de+" ?)",we=new RegExp("^(?:(?:"+be+"{4})*(?:(?:"+be+"{3}"+ye+")|(?:"+be+"{2}"+ge+"=)|(?:"+be+_e+"= ?=)))?$"),Ee=h({},B,{name:"base64Binary",typeErrorMsg:"not a valid base64Binary",regexp:we,validParams:[I,k,A,S],convertValue:function(e,t){return e.replace(/\s/g,"")},valueLength:function(e){return Math.floor(3*e.replace(/[\s=]/g,"").length/4)}}),xe=h({},B,{name:"hexBinary",typeErrorMsg:"not a valid hexBinary",regexp:/^(?:[0-9a-fA-F]{2})*$/,validParams:[I,k,A,S],convertValue:function(e,t){return e},valueLength:function(e){return e.length/2}}),Ie=new RegExp("^(?:(?:[-+]?INF)|(?:NaN)|(?:"+X+"(?:[Ee]"+ee+")?))$"),ke=h({},B,{name:"float",typeErrorMsg:"not a valid float",regexp:Ie,validParams:[S,R,O,P,M],convertValue:parseFloat}),Ae=h({},B,{name:"double",typeErrorMsg:"not a valid double",regexp:Ie,validParams:[S,R,O,P,M],convertValue:parseFloat}),Ne=h({},B,{name:"QName",typeErrorMsg:"not a valid QName",regexp:new RegExp("^(?:"+y+":)?"+y+"$"),needsContext:!0,convertValue:function(e,t){var n=t.resolver.resolveName(B.convertValue(e));if(void 0===n)throw new x([new w("cannot resolve the name "+e)]);return"{"+n.ns+"}"+n.name},validParams:[S,I,k,A]}),Se=h({},B,{name:"NOTATION",typeErrorMsg:"not a valid NOTATION",regexp:new RegExp("^(?:"+y+":)?"+y+"$"),needsContext:!0,convertValue:function(e,t){var n=t.resolver.resolveName(B.convertValue(e));if(void 0===n)throw new x([new w("cannot resolve the name "+e)]);return"{"+n.ns+"}"+n.name},validParams:[S,I,k,A]}),Ce=h({},B,{name:"duration",typeErrorMsg:"not a valid duration",regexp:/^-?P(?!$)(?:\d+Y)?(?:\d+M)?(?:\d+D)?(?:T(?!$)(?:\d+H)?(?:\d+M)?(?:\d+(\.\d+)?S)?)?$/,validParams:[S]}),Te="-?(?:[1-9]\\d*)?\\d{4}",Pe="[01]\\d",Me="[0-3]\\d",Re="[012]\\d:[0-5]\\d:[0-5]\\d(?:\\.\\d+)?",Oe="(?:[+-][01]\\d:[0-5]\\d|Z)",Be=new RegExp(Oe+"$"),Ve=new RegExp("^("+Te+")-("+Pe+")-("+Me+")T("+Re+")("+Oe+"?)$"),Fe=[void 0,31,29,31,30,31,30,31,31,30,31,30,31],Le=h({},B,{name:"dateTime",typeErrorMsg:"not a valid dateTime",regexp:new RegExp("^"+Te+"-"+Pe+"-"+Me+"T"+Re+Oe+"?$"),validParams:[S],disallows:function(e,t,n){var a=B.disallows.call(this,e,t,n);return a?a:!!isNaN(l(e))&&[new w(this.typeErrorMsg)]}}),De=h({},B,{name:"time",typeErrorMsg:"not a valid time",regexp:new RegExp("^"+Re+Oe+"?$"),validParams:[S],disallows:function(e,t,n){var a=B.disallows.call(this,e,t,n);return a?a:!!isNaN(l("1901-01-01T"+e))&&[new w(this.typeErrorMsg)]}}),$e=h({},B,{name:"date",typeErrorMsg:"not a valid date",regexp:new RegExp("^"+Te+"-"+Pe+"-"+Me+Oe+"?$"),validParams:[S],disallows:function(e,t,n){var a=B.disallows.call(this,e,t,n);if(a)return a;var r=e.match(Be);return e=r?e.slice(0,r.index)+"T00:00:00"+r[0]:e+"T00:00:00",!!isNaN(l(e))&&[new w(this.typeErrorMsg)]}}),We=h({},B,{name:"gYearMonth",typeErrorMsg:"not a valid gYearMonth",regexp:new RegExp("^"+Te+"-"+Pe+Oe+"?$"),validParams:[S],disallows:function(e,t,n){var a=B.disallows.call(this,e,t,n);if(a)return a;var r=e.match(Be);return e=r?e.slice(0,r.index)+"-01T00:00:00"+r[0]:e+"-01T00:00:00",!!isNaN(l(e))&&[new w(this.typeErrorMsg)]}}),je=h({},B,{name:"gYear",typeErrorMsg:"not a valid gYear",regexp:new RegExp("^"+Te+Oe+"?$"),validParams:[S],disallows:function(e,t,n){var a=B.disallows.call(this,e,t,n);if(a)return a;var r=e.match(Be);return e=r?e.slice(0,r.index)+"-01-01T00:00:00"+r[0]:e+"-01-01T00:00:00",!!isNaN(l(e))&&[new w(this.typeErrorMsg)]}}),Ue=h({},B,{name:"gMonthDay",typeErrorMsg:"not a valid gMonthDay",regexp:new RegExp("^"+Pe+"-"+Me+Oe+"?$"),validParams:[S],disallows:function(e,t,n){var a=B.disallows.call(this,e,t,n);if(a)return a;var r=e.match(Be);return e=r?e.slice(0,r.index)+"T00:00:00"+r[0]:e+"T00:00:00",!!isNaN(l("2000-"+e))&&[new w(this.typeErrorMsg)]}}),Ge=h({},B,{name:"gDay",typeErrorMsg:"not a valid gDay",regexp:new RegExp("^"+Me+Oe+"?$"),validParams:[S],disallows:function(e,t,n){var a=B.disallows.call(this,e,t,n);if(a)return a;var r=e.match(Be);return e=r?e.slice(0,r.index)+"T00:00:00"+r[0]:e+"T00:00:00",!!isNaN(l("2000-01-"+e))&&[new w(this.typeErrorMsg)]}}),ze=h({},B,{name:"gMonth",typeErrorMsg:"not a valid gMonth",regexp:new RegExp("^"+Pe+Oe+"?$"),validParams:[S],disallows:function(e,t,n){var a=B.disallows.call(this,e,t,n);if(a)return a;var r=e.match(Be);return e=r?e.slice(0,r.index)+"-01T00:00:00"+r[0]:e+"-01T00:00:00",!!isNaN(l("2000-"+e))&&[new w(this.typeErrorMsg)]}}),He=/^(?:[A-Za-z][A-Za-z0-9+\-.]*:(?:\/\/(?:(?:[A-Za-z0-9\-._~!$&'()*+,;=:]|%[0-9A-Fa-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\.[A-Za-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[A-Za-z0-9\-._~!$&'()*+,;=]|%[0-9A-Fa-f]{2})*)(?::[0-9]*)?(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|\/(?:(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)?|(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|)(?:\?(?:[A-Za-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9A-Fa-f]{2})*)?(?:\#(?:[A-Za-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9A-Fa-f]{2})*)?|(?:\/\/(?:(?:[A-Za-z0-9\-._~!$&'()*+,;=:]|%[0-9A-Fa-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\.[A-Za-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[A-Za-z0-9\-._~!$&'()*+,;=]|%[0-9A-Fa-f]{2})*)(?::[0-9]*)?(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|\/(?:(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)?|(?:[A-Za-z0-9\-._~!$&'()*+,;=@]|%[0-9A-Fa-f]{2})+(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|)(?:\?(?:[A-Za-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9A-Fa-f]{2})*)?(?:\#(?:[A-Za-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9A-Fa-f]{2})*)?)$/,Ze=h({},B,{name:"anyURI",typeErrorMsg:"not a valid anyURI",regexp:He,validParams:[S,I,k,A]}),Ke={uri:"http://www.w3.org/2001/XMLSchema-datatypes",types:{string:V,normalizedString:F,token:L,language:D,Name:$,NCName:W,NMTOKEN:U,NMTOKENS:z,ID:H,IDREF:Z,IDREFS:Y,ENTITY:J,ENTITIES:q,decimal:Q,integer:te,nonPositiveInteger:ne,negativeInteger:ae,nonNegativeInteger:re,positiveInteger:ie,long:se,int:oe,short:le,byte:he,unsignedLong:ce,unsignedInt:pe,unsignedShort:ue,unsignedByte:me,boolean:fe,base64Binary:Ee,hexBinary:xe,float:ke,double:Ae,QName:Ne,NOTATION:Se,duration:Ce,dateTime:Le,time:De,date:$e,gYearMonth:We,gYear:je,gMonthDay:Ue,gDay:Ge,gMonth:ze,anyURI:Ze}};Object.keys(Ke.types).forEach(function(e){Ke.types[e].init()}),t.xmlschema=Ke},function(e,t,n){(function(e,a){var r=function(){function e(e){var t=new Error(e);this.name="SalveParsingError",this.stack=t.stack,this.message=t.message}function a(t,n){throw new e(t)}function r(e){T.unshift({negative:e,capturedMultiChar:[]})}function i(){this.yy={}}var s=function(e,t,n,a){for(n=n||{},a=e.length;a--;n[e[a]]=t);return n},o=[1,8],l=[1,10],h=[1,13],c=[1,19],p=[1,20],u=[1,14],m=[1,15],f=[1,16],d=[1,17],v=[5,23],y=[5,8,20,22,23,26,30,31,42,43,44,45],b=[5,8,12,13,14,15,20,22,23,26,30,31,42,43,44,45],g=[5,8,12,13,14,15,20,22,23,26,29,30,31,36,38,40,41,42,43,44,45],_=[1,37],w=[1,39],E=[1,40],x=[38,40,41,42,43,44,45],I=[29,36,38,40,41,42,43,44,45],k={trace:function(){},yy:{},symbols_:{error:2,start:3,input:4,EOF:5,regexp:6,branch:7,"|":8,piece:9,atom:10,quantifier:11,"?":12,"*":13,"+":14,"{":15,quantity:16,"}":17,NUMBER:18,",":19,CHAR:20,charClass:21,"(":22,")":23,charClassEsc:24,charClassExpr:25,WILDCARDESC:26,charClassExprStart:27,charGroup:28,"]":29,"[":30,"[^":31,posCharGroups:32,charClassSub:33,posCharGroup:34,charRange:35,CLASSSUBTRACTION:36,seRange:37,"-":38,charOrEsc:39,XMLCHAR:40,SingleCharEsc:41,SINGLECHARESC:42,MULTICHARESC:43,CATESC:44,COMPLESC:45,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",8:"|",12:"?",13:"*",14:"+",15:"{",17:"}",18:"NUMBER",19:",",20:"CHAR",22:"(",23:")",26:"WILDCARDESC",29:"]",30:"[",31:"[^",36:"CLASSSUBTRACTION",38:"-",40:"XMLCHAR",41:"SingleCharEsc",42:"SINGLECHARESC",43:"MULTICHARESC",44:"CATESC",45:"COMPLESC"},productions_:[0,[3,1],[4,1],[4,2],[6,1],[6,3],[7,1],[7,2],[9,1],[9,2],[11,1],[11,1],[11,1],[11,3],[16,1],[16,3],[16,2],[10,1],[10,1],[10,3],[21,1],[21,1],[21,1],[25,3],[27,1],[27,1],[28,1],[28,1],[32,1],[32,2],[34,1],[34,1],[33,3],[35,1],[35,1],[37,3],[37,1],[39,1],[39,1],[24,1],[24,1],[24,1],[24,1]],performAction:function(e,t,n,i,s,o,l,h){var c=o.length-1;switch(s){case 1:switch(this.parseError=a,h=h||"re"){case"string":return o[c];case"re":var p=P.test(o[c])?N:RegExp;return new p(o[c]);default:throw new Error("unsupported output type: "+h)}break;case 2:this.$="^$";break;case 3:this.$="^"+o[c-1]+"$";break;case 5:case 13:case 35:this.$=o[c-2].concat(o[c-1],o[c]);break;case 7:case 9:case 29:this.$=o[c-1]+o[c];break;case 15:this.$=o[c-2].concat(",",o[c]);break;case 16:this.$=o[c-1].concat(o[c]);break;case 19:this.$="(?:"+o[c-1]+o[c];break;case 23:var u=T.shift(),m=u.capturedMultiChar,f=u.subtraction?"(?!"+u.subtraction+")":"";if(0!==m.length){var d=["(?:",f];if(u.negative){d.push("(?=[");for(var v=0;v<m.length;++v)d.push(M[m[v]].slice(1));d.push("])")}else for(var v=0;v<m.length;++v)d.push("[",M[m[v]],"]|");d.push(o[c-2],o[c-1],o[c],")"),this.$=d.join("")}else this.$=""!==f?"(?:"+f+o[c-2].concat(o[c-1],o[c])+")":o[c-2].concat(o[c-1],o[c]);break;case 24:r(!1),this.$=o[c];break;case 25:r(!0),this.$=o[c];break;case 32:this.$=o[c-2],T[0].subtraction=o[c];break;case 40:if(T.length){var y=M[o[c]];"^"===y.charAt(0)?(T[0].capturedMultiChar.push(o[c]),this.$=""):this.$=y}else this.$=R[o[c]]}},table:[{3:1,4:2,5:[1,3],6:4,7:5,9:6,10:7,20:o,21:9,22:l,24:11,25:12,26:h,27:18,30:c,31:p,42:u,43:m,44:f,45:d},{1:[3]},{1:[2,1]},{1:[2,2]},{5:[1,21]},s(v,[2,4],{10:7,21:9,24:11,25:12,27:18,9:23,8:[1,22],20:o,22:l,26:h,30:c,31:p,42:u,43:m,44:f,45:d}),s(y,[2,6]),s(y,[2,8],{11:24,12:[1,25],13:[1,26],14:[1,27],15:[1,28]}),s(b,[2,17]),s(b,[2,18]),{6:29,7:5,9:6,10:7,20:o,21:9,22:l,24:11,25:12,26:h,27:18,30:c,31:p,42:u,43:m,44:f,45:d},s(b,[2,20]),s(b,[2,21]),s(b,[2,22]),s(g,[2,39]),s(g,[2,40]),s(g,[2,41]),s(g,[2,42]),{24:34,28:30,32:31,33:32,34:33,35:35,37:36,38:_,39:38,40:w,41:E,42:u,43:m,44:f,45:d},s(x,[2,24]),s(x,[2,25]),{1:[2,3]},{6:41,7:5,9:6,10:7,20:o,21:9,22:l,24:11,25:12,26:h,27:18,30:c,31:p,42:u,43:m,44:f,45:d},s(y,[2,7]),s(y,[2,9]),s(y,[2,10]),s(y,[2,11]),s(y,[2,12]),{16:42,18:[1,43]},{23:[1,44]},{29:[1,45]},{24:34,29:[2,26],34:46,35:35,36:[1,47],37:36,38:_,39:38,40:w,41:E,42:u,43:m,44:f,45:d},{29:[2,27]},s(I,[2,28]),s(I,[2,30]),s(I,[2,31]),s(I,[2,33]),s(I,[2,34]),s([29,36,40,41,42,43,44,45],[2,36],{38:[1,48]}),s(I,[2,37]),s(I,[2,38]),s(v,[2,5]),{17:[1,49]},{17:[2,14],19:[1,50]},s(b,[2,19]),s([5,8,12,13,14,15,20,22,23,26,29,30,31,42,43,44,45],[2,23]),s(I,[2,29]),{25:51,27:18,30:c,31:p},{39:52,40:w,41:E},s(y,[2,13]),{17:[2,16],18:[1,53]},{29:[2,32]},s(I,[2,35]),{17:[2,15]}],defaultActions:{2:[2,1],3:[2,2],21:[2,3],32:[2,27],51:[2,32],53:[2,15]},parseError:function(e,t){function n(e,t){this.message=e,this.hash=t}if(!t.recoverable)throw n.prototype=Error,new n(e,t);this.trace(e)},parse:function(e){var t=this,n=[0],a=[null],r=[],i=this.table,s="",o=0,l=0,h=0,c=2,p=1,u=r.slice.call(arguments,1),m=Object.create(this.lexer),f={yy:{}};for(var d in this.yy)Object.prototype.hasOwnProperty.call(this.yy,d)&&(f.yy[d]=this.yy[d]);m.setInput(e,f.yy),f.yy.lexer=m,f.yy.parser=this,"undefined"==typeof m.yylloc&&(m.yylloc={});var v=m.yylloc;r.push(v);var y=m.options&&m.options.ranges;"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,g,_,w,E,x,I,k,A,N=function(){var e;return e=m.lex()||p,"number"!=typeof e&&(e=t.symbols_[e]||e),e},S={};;){if(_=n[n.length-1],this.defaultActions[_]?w=this.defaultActions[_]:(null!==b&&"undefined"!=typeof b||(b=N()),w=i[_]&&i[_][b]),"undefined"==typeof w||!w.length||!w[0]){var C="";A=[];for(x in i[_])this.terminals_[x]&&x>c&&A.push("'"+this.terminals_[x]+"'");C=m.showPosition?"Parse error on line "+(o+1)+":\n"+m.showPosition()+"\nExpecting "+A.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(o+1)+": Unexpected "+(b==p?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(C,{text:m.match,token:this.terminals_[b]||b,line:m.yylineno,loc:v,expected:A})}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+_+", token: "+b);switch(w[0]){case 1:n.push(b),a.push(m.yytext),r.push(m.yylloc),n.push(w[1]),b=null,g?(b=g,g=null):(l=m.yyleng,s=m.yytext,o=m.yylineno,v=m.yylloc,h>0&&h--);break;case 2:if(I=this.productions_[w[1]][1],S.$=a[a.length-I],S._$={first_line:r[r.length-(I||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(I||1)].first_column,last_column:r[r.length-1].last_column},y&&(S._$.range=[r[r.length-(I||1)].range[0],r[r.length-1].range[1]]),E=this.performAction.apply(S,[s,l,o,f.yy,w[1],a,r].concat(u)),"undefined"!=typeof E)return E;I&&(n=n.slice(0,-1*I*2),a=a.slice(0,-1*I),r=r.slice(0,-1*I)),n.push(this.productions_[w[1]][0]),a.push(S.$),r.push(S._$),k=i[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}},A=n(16),N=n(17);e.prototype=new Error,t.SalveParsingError=e;var S=A.xmlNameChar,C=A.xmlLetter,T=[],P=/\\p/i,M={"\\s":" \\t\\n\\r","\\S":"^ \\t\\n\\r","\\i":""+C+"_:","\\I":"^"+C+"_:","\\c":""+S,"\\C":"^"+S,"\\d":"\\p{Nd}","\\D":"^\\p{Nd}","\\w":"^\\p{P}\\p{Z}\\p{C}","\\W":"\\p{P}\\p{Z}\\p{C}"},R=[];for(var O in M)M.hasOwnProperty(O)&&(R[O]="["+M[O]+"]");var B=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===a.length?this.yylloc.first_column:0)+a[a.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,a,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),a=e[0].match(/(?:\r\n?|\n).*/g),a&&(this.yylineno+=a.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:a?a[a.length-1].length-a[a.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var i in r)this[i]=r[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,a;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),i=0;i<r.length;i++)if(n=this._input.match(this.rules[r[i]]),n&&(!t||n[0].length>t[0].length)){if(t=n,a=i,this.options.backtrack_lexer){if(e=this.test_match(n,r[i]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,r[a]),e!==!1&&e):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,a){switch(n){case 0:return 18;case 1:return 19;case 2:return this.popState(),17;case 3:return this.begin("CHARCLASS"),31;case 4:return this.begin("CHARCLASS"),30;case 5:return 42;case 6:return 43;case 7:return 36;case 8:return 38;case 9:return 40;case 10:return this.popState(),29;case 11:return 22;case 12:return 8;case 13:return 23;case 14:return 13;case 15:return 14;case 16:return 12;case 17:return this.begin("QUANTITY"),15;case 18:return 17;case 19:return 29;case 20:return"^";case 21:return 44;case 22:return 45;case 23:return 26;case 24:return 5;case 25:return 20}},rules:[/^(?:[0-9])/,/^(?:,)/,/^(?:\})/,/^(?:\[\^)/,/^(?:\[)/,/^(?:\\[-nrt\|.?*+(){}[\]^])/,/^(?:\\[sSiIcCdDwW])/,/^(?:-(?=\[))/,/^(?:-)/,/^(?:[^-[\]])/,/^(?:\])/,/^(?:\()/,/^(?:\|)/,/^(?:\))/,/^(?:\*)/,/^(?:\+)/,/^(?:\?)/,/^(?:\{)/,/^(?:\})/,/^(?:\])/,/^(?:\^)/,/^(?:\\p\{.*?\})/,/^(?:\\P\{.*?\})/,/^(?:\.)/,/^(?:$)/,/^(?:[^\\])/],conditions:{CHARCLASS:{rules:[3,4,5,6,7,8,9,10],inclusive:!1},QUANTITY:{rules:[0,1,2],inclusive:!1},INITIAL:{rules:[3,4,5,6,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0}}};return e}();return k.lexer=B,i.prototype=k,k.Parser=i,new i}();t.parser=r,t.Parser=r.Parser,t.parse=function(){return r.parse.apply(r,arguments)},t.main=function(){throw new Error("this module cannot be used as main")},"undefined"!=typeof e&&n.c[0]===e&&t.main(a.argv.slice(1))}).call(t,n(14)(e),n(15))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(p===clearTimeout)return clearTimeout(e);if((p===a||!p)&&clearTimeout)return p=clearTimeout,
clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function s(){d&&m&&(d=!1,m.length?f=m.concat(f):v=-1,f.length&&o())}function o(){if(!d){var e=r(s);d=!0;for(var t=f.length;t;){for(m=f,f=[];++v<t;)m&&m[v].run();v=-1,t=f.length}m=null,d=!1,i(e)}}function l(e,t){this.fun=e,this.array=t}function h(){}var c,p,u=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{p="function"==typeof clearTimeout?clearTimeout:a}catch(e){p=a}}();var m,f=[],d=!1,v=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new l(e,t)),1!==f.length||d||r(o)},l.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=h,u.addListener=h,u.once=h,u.off=h,u.removeListener=h,u.removeAllListeners=h,u.emit=h,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t){/**
	 * @desc Collection of constants that model the way XML refers to various
	 * characters and groups of characters. This module is essentially private to
	 * salve.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";var n="A-Z_a-z----------------------------------------------------------------------------------------------------------------------------------------------------",a="--",r=n+a,i="0-9--------------",s="------------------------------------------------------------------",o="---",l="-"+r+i+"._:"+s+o,h="["+r+"_:](?:["+l+"])*",c=new RegExp("^"+h+"$"),p="["+r+"_](?:[-"+r+i+"._"+s+o+"])*",u=new RegExp("^"+p+"$");t.xmlNameRe=c,t.xmlNcname=p,t.xmlNcnameRe=u,t.xmlNameChar=l,t.xmlLetter=r},function(e,t,n){var a=n(18);n(19)(a),n(20)(a),n(21)(a),n(22)(a),n(23)(a),n(24)(a),n(25)(a),e.exports=a},function(e,t){/*!
	 * XRegExp 3.1.1
	 * <xregexp.com>
	 * Steven Levithan (c) 2007-2016 MIT License
	 */
"use strict";function n(e){var t=!0;try{new RegExp("",e)}catch(e){t=!1}return t&&"y"===e?new RegExp("aa|.","y").test("b"):t}function a(e,t,n,a,r){var i;if(e[E]={captureNames:t},r)return e;if(e.__proto__)e.__proto__=w.prototype;else for(i in w.prototype)e[i]=w.prototype[i];return e[E].source=n,e[E].flags=a?a.split("").sort().join(""):a,e}function r(e){return I.replace.call(e,/([\s\S])(?=[\s\S]*\1)/g,"")}function i(e,t){if(!w.isRegExp(e))throw new TypeError("Type RegExp expected");var n=e[E]||{},i=o(e),s="",h="",c=null,p=null;return t=t||{},t.removeG&&(h+="g"),t.removeY&&(h+="y"),h&&(i=I.replace.call(i,new RegExp("["+h+"]+","g"),"")),t.addG&&(s+="g"),t.addY&&(s+="y"),s&&(i=r(i+s)),t.isInternalOnly||(void 0!==n.source&&(c=n.source),null!=n.flags&&(p=s?r(n.flags+s):n.flags)),e=a(new RegExp(e.source,i),l(e)?n.captureNames.slice(0):null,c,p,t.isInternalOnly)}function s(e){return parseInt(e,16)}function o(e){return O?e.flags:I.exec.call(/\/([a-z]*)$/i,RegExp.prototype.toString.call(e))[1]}function l(e){return!(!e[E]||!e[E].captureNames)}function h(e){return parseInt(e,10).toString(16)}function c(e,t){var n,a=e.length;for(n=0;n<a;++n)if(e[n]===t)return n;return-1}function p(e,t){return B.call(e)==="[object "+t+"]"}function u(e,t,n){return I.test.call(n.indexOf("x")>-1?/^(?:\s|#[^#\n]*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,e.slice(t))}function m(e){for(;e.length<4;)e="0"+e;return e}function f(e,t){var n;if(r(t)!==t)throw new SyntaxError("Invalid duplicate regex flag "+t);for(e=I.replace.call(e,/^\(\?([\w$]+)\)/,function(e,n){if(I.test.call(/[gy]/,n))throw new SyntaxError("Cannot use flag g or y in mode modifier "+e);return t=r(t+n),""}),n=0;n<t.length;++n)if(!L[t.charAt(n)])throw new SyntaxError("Unknown regex flag "+t.charAt(n));return{pattern:e,flags:t}}function d(e){var t={};return p(e,"String")?(w.forEach(e,/[^\s,]+/,function(e){t[e]=!0}),t):e}function v(e){if(!/^[\w$]$/.test(e))throw new Error("Flag must be a single character A-Za-z0-9_$");L[e]=!0}function y(e,t,n,a,r){for(var i,s,o=S.length,l=e.charAt(n),h=null;o--;)if(s=S[o],!(s.leadChar&&s.leadChar!==l||s.scope!==a&&"all"!==s.scope||s.flag&&t.indexOf(s.flag)===-1)&&(i=w.exec(e,s.regex,n,"sticky"))){h={matchLength:i[0].length,output:s.handler.call(r,i,a,t),reparse:s.reparse};break}return h}function b(e){x.astral=e}function g(e){RegExp.prototype.exec=(e?k:I).exec,RegExp.prototype.test=(e?k:I).test,String.prototype.match=(e?k:I).match,String.prototype.replace=(e?k:I).replace,String.prototype.split=(e?k:I).split,x.natives=e}function _(e){if(null==e)throw new TypeError("Cannot convert null or undefined to object");return e}function w(e,t){if(w.isRegExp(e)){if(void 0!==t)throw new TypeError("Cannot supply flags when copying a RegExp");return i(e)}if(e=void 0===e?"":String(e),t=void 0===t?"":String(t),w.isInstalled("astral")&&t.indexOf("A")===-1&&(t+="A"),N[e]||(N[e]={}),!N[e][t]){for(var n,r={hasNamedCapture:!1,captureNames:[]},s=C,o="",l=0,h=f(e,t),c=h.pattern,p=h.flags;l<c.length;){do n=y(c,p,l,s,r),n&&n.reparse&&(c=c.slice(0,l)+n.output+c.slice(l+n.matchLength));while(n&&n.reparse);if(n)o+=n.output,l+=n.matchLength||1;else{var u=w.exec(c,P[s],l,"sticky")[0];o+=u,l+=u.length,"["===u&&s===C?s=T:"]"===u&&s===T&&(s=C)}}N[e][t]={pattern:I.replace.call(o,/(?:\(\?:\))+/g,"(?:)"),flags:I.replace.call(p,/[^gimuy]+/g,""),captures:r.hasNamedCapture?r.captureNames:null}}var m=N[e][t];return a(new RegExp(m.pattern,m.flags),m.captures,e,t)}var E="xregexp",x={astral:!1,natives:!1},I={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},k={},A={},N={},S=[],C="default",T="class",P={default:/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|\(\?(?:[:=!]|<[=!])|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,class:/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|[\s\S]/},M=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,R=void 0===I.exec.call(/()??/,"")[1],O=void 0!==/x/.flags,B={}.toString,V=n("u"),F=n("y"),L={g:!0,i:!0,m:!0,u:V,y:F};w.prototype=new RegExp,w.version="3.1.1",w._hasNativeFlag=n,w._dec=s,w._hex=h,w._pad4=m,w.addToken=function(e,t,n){n=n||{};var a,r=n.optionalFlags;if(n.flag&&v(n.flag),r)for(r=I.split.call(r,""),a=0;a<r.length;++a)v(r[a]);S.push({regex:i(e,{addG:!0,addY:F,isInternalOnly:!0}),handler:t,scope:n.scope||C,flag:n.flag,reparse:n.reparse,leadChar:n.leadChar}),w.cache.flush("patterns")},w.cache=function(e,t){return A[e]||(A[e]={}),A[e][t]||(A[e][t]=w(e,t))},w.cache.flush=function(e){"patterns"===e?N={}:A={}},w.escape=function(e){return I.replace.call(_(e),/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},w.exec=function(e,t,n,a){var r,s,o="g",l=!1;return l=F&&!!(a||t.sticky&&a!==!1),l&&(o+="y"),t[E]=t[E]||{},s=t[E][o]||(t[E][o]=i(t,{addG:!0,addY:l,removeY:a===!1,isInternalOnly:!0})),s.lastIndex=n=n||0,r=k.exec.call(s,e),a&&r&&r.index!==n&&(r=null),t.global&&(t.lastIndex=r?s.lastIndex:0),r},w.forEach=function(e,t,n){for(var a,r=0,i=-1;a=w.exec(e,t,r);)n(a,++i,e,t),r=a.index+(a[0].length||1)},w.globalize=function(e){return i(e,{addG:!0})},w.install=function(e){e=d(e),!x.astral&&e.astral&&b(!0),!x.natives&&e.natives&&g(!0)},w.isInstalled=function(e){return!!x[e]},w.isRegExp=function(e){return"[object RegExp]"===B.call(e)},w.match=function(e,t,n){var a,r,s=t.global&&"one"!==n||"all"===n,o=(s?"g":"")+(t.sticky?"y":"")||"noGY";return t[E]=t[E]||{},r=t[E][o]||(t[E][o]=i(t,{addG:!!s,removeG:"one"===n,isInternalOnly:!0})),a=I.match.call(_(e),r),t.global&&(t.lastIndex="one"===n&&a?a.index+a[0].length:0),s?a||[]:a&&a[0]},w.matchChain=function(e,t){return function e(n,a){function r(e){if(i.backref){if(!(e.hasOwnProperty(i.backref)||+i.backref<e.length))throw new ReferenceError("Backreference to undefined group: "+i.backref);s.push(e[i.backref]||"")}else s.push(e[0])}for(var i=t[a].regex?t[a]:{regex:t[a]},s=[],o=0;o<n.length;++o)w.forEach(n[o],i.regex,r);return a!==t.length-1&&s.length?e(s,a+1):s}([e],0)},w.replace=function(e,t,n,a){var r,s=w.isRegExp(t),o=t.global&&"one"!==a||"all"===a,l=(o?"g":"")+(t.sticky?"y":"")||"noGY",h=t;return s?(t[E]=t[E]||{},h=t[E][l]||(t[E][l]=i(t,{addG:!!o,removeG:"one"===a,isInternalOnly:!0}))):o&&(h=new RegExp(w.escape(String(t)),"g")),r=k.replace.call(_(e),h,n),s&&t.global&&(t.lastIndex=0),r},w.replaceEach=function(e,t){var n,a;for(n=0;n<t.length;++n)a=t[n],e=w.replace(e,a[0],a[1],a[2]);return e},w.split=function(e,t,n){return k.split.call(_(e),t,n)},w.test=function(e,t,n,a){return!!w.exec(e,t,n,a)},w.uninstall=function(e){e=d(e),x.astral&&e.astral&&b(!1),x.natives&&e.natives&&g(!1)},w.union=function(e,t){function n(e,t,n){var s=r[i-a];if(t){if(++i,s)return"(?<"+s+">"}else if(n)return"\\"+(+n+a);return e}var a,r,i=0;if(!p(e,"Array")||!e.length)throw new TypeError("Must provide a nonempty array of patterns to merge");for(var s,o=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,l=[],h=0;h<e.length;++h)s=e[h],w.isRegExp(s)?(a=i,r=s[E]&&s[E].captureNames||[],l.push(I.replace.call(w(s.source).source,o,n))):l.push(w.escape(s));return w(l.join("|"),t)},k.exec=function(e){var t,n,a,r=this.lastIndex,s=I.exec.apply(this,arguments);if(s){if(!R&&s.length>1&&c(s,"")>-1&&(n=i(this,{removeG:!0,isInternalOnly:!0}),I.replace.call(String(e).slice(s.index),n,function(){var e,t=arguments.length;for(e=1;e<t-2;++e)void 0===arguments[e]&&(s[e]=void 0)})),this[E]&&this[E].captureNames)for(a=1;a<s.length;++a)t=this[E].captureNames[a-1],t&&(s[t]=s[a]);this.global&&!s[0].length&&this.lastIndex>s.index&&(this.lastIndex=s.index)}return this.global||(this.lastIndex=r),s},k.test=function(e){return!!k.exec.call(this,e)},k.match=function(e){var t;if(w.isRegExp(e)){if(e.global)return t=I.match.apply(this,arguments),e.lastIndex=0,t}else e=new RegExp(e);return k.exec.call(e,_(this))},k.replace=function(e,t){var n,a,r,i=w.isRegExp(e);return i?(e[E]&&(a=e[E].captureNames),n=e.lastIndex):e+="",r=p(t,"Function")?I.replace.call(String(this),e,function(){var n,r=arguments;if(a)for(r[0]=new String(r[0]),n=0;n<a.length;++n)a[n]&&(r[0][a[n]]=r[n+1]);return i&&e.global&&(e.lastIndex=r[r.length-2]+r[0].length),t.apply(void 0,r)}):I.replace.call(null==this?this:String(this),e,function(){var e=arguments;return I.replace.call(String(t),M,function(t,n,r){var i;if(n){if(i=+n,i<=e.length-3)return e[i]||"";if(i=a?c(a,n):-1,i<0)throw new SyntaxError("Backreference to undefined group "+t);return e[i+1]||""}if("$"===r)return"$";if("&"===r||0===+r)return e[0];if("`"===r)return e[e.length-1].slice(0,e[e.length-2]);if("'"===r)return e[e.length-1].slice(e[e.length-2]+e[0].length);if(r=+r,!isNaN(r)){if(r>e.length-3)throw new SyntaxError("Backreference to undefined group "+t);return e[r]||""}throw new SyntaxError("Invalid token "+t)})}),i&&(e.global?e.lastIndex=0:e.lastIndex=n),r},k.split=function(e,t){if(!w.isRegExp(e))return I.split.apply(this,arguments);var n,a=String(this),r=[],i=e.lastIndex,s=0;return t=(void 0===t?-1:t)>>>0,w.forEach(a,e,function(e){e.index+e[0].length>s&&(r.push(a.slice(s,e.index)),e.length>1&&e.index<a.length&&Array.prototype.push.apply(r,e.slice(1)),n=e[0].length,s=e.index+n)}),s===a.length?I.test.call(e,"")&&!n||r.push(""):r.push(a.slice(s)),e.lastIndex=i,r.length>t?r.slice(0,t):r},w.addToken(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4}|{[\dA-Fa-f]+})|x(?![\dA-Fa-f]{2}))/,function(e,t){if("B"===e[1]&&t===C)return e[0];throw new SyntaxError("Invalid escape "+e[0])},{scope:"all",leadChar:"\\"}),w.addToken(/\\u{([\dA-Fa-f]+)}/,function(e,t,n){var a=s(e[1]);if(a>1114111)throw new SyntaxError("Invalid Unicode code point "+e[0]);if(a<=65535)return"\\u"+m(h(a));if(V&&n.indexOf("u")>-1)return e[0];throw new SyntaxError("Cannot use Unicode code point above \\u{FFFF} without flag u")},{scope:"all",leadChar:"\\"}),w.addToken(/\[(\^?)]/,function(e){return e[1]?"[\\s\\S]":"\\b\\B"},{leadChar:"["}),w.addToken(/\(\?#[^)]*\)/,function(e,t,n){return u(e.input,e.index+e[0].length,n)?"":"(?:)"},{leadChar:"("}),w.addToken(/\s+|#[^\n]*\n?/,function(e,t,n){return u(e.input,e.index+e[0].length,n)?"":"(?:)"},{flag:"x"}),w.addToken(/\./,function(){return"[\\s\\S]"},{flag:"s",leadChar:"."}),w.addToken(/\\k<([\w$]+)>/,function(e){var t=isNaN(e[1])?c(this.captureNames,e[1])+1:+e[1],n=e.index+e[0].length;if(!t||t>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+e[0]);return"\\"+t+(n===e.input.length||isNaN(e.input.charAt(n))?"":"(?:)")},{leadChar:"\\"}),w.addToken(/\\(\d+)/,function(e,t){if(!(t===C&&/^[1-9]/.test(e[1])&&+e[1]<=this.captureNames.length)&&"0"!==e[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+e[0]);return e[0]},{scope:"all",leadChar:"\\"}),w.addToken(/\(\?P?<([\w$]+)>/,function(e){if(!isNaN(e[1]))throw new SyntaxError("Cannot use integer as capture name "+e[0]);if("length"===e[1]||"__proto__"===e[1])throw new SyntaxError("Cannot use reserved word as capture name "+e[0]);if(c(this.captureNames,e[1])>-1)throw new SyntaxError("Cannot use same name for multiple groups "+e[0]);return this.captureNames.push(e[1]),this.hasNamedCapture=!0,"("},{leadChar:"("}),w.addToken(/\((?!\?)/,function(e,t,n){return n.indexOf("n")>-1?"(?:":(this.captureNames.push(null),"(")},{optionalFlags:"n",leadChar:"("}),e.exports=w},function(e,t){/*!
	 * XRegExp.build 3.1.1
	 * <xregexp.com>
	 * Steven Levithan (c) 2012-2016 MIT License
	 * Inspired by Lea Verou's RegExp.create <lea.verou.me>
	 */
e.exports=function(e){"use strict";function t(e){var t=/^(?:\(\?:\))*\^/,n=/\$(?:\(\?:\))*$/;return t.test(e)&&n.test(e)&&n.test(e.replace(/\\[\s\S]/g,""))?e.replace(t,"").replace(n,""):e}function n(t){return e.isRegExp(t)?t[a]&&t[a].captureNames?t:e(t.source):e(t)}var a="xregexp",r=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,i=e.union([/\({{([\w$]+)}}\)|{{([\w$]+)}}/,r],"g");e.build=function(s,o,l){var h,c,p,u,m=/^\(\?([\w$]+)\)/.exec(s),f={},d=0,v=0,y=[0];m&&(l=l||"",m[1].replace(/./g,function(e){l+=l.indexOf(e)>-1?"":e}));for(u in o)o.hasOwnProperty(u)&&(p=n(o[u]),f[u]={pattern:t(p.source),names:p[a].captureNames||[]});return s=n(s),c=s[a].captureNames||[],s=s.source.replace(i,function(e,t,n,a,i){var s,o,l,p=t||n;if(p){if(!f.hasOwnProperty(p))throw new ReferenceError("Undefined property "+e);return t?(s=c[v],y[++v]=++d,o="(?<"+(s||p)+">"):o="(?:",h=d,o+f[p].pattern.replace(r,function(e,t,n){if(t){if(s=f[p].names[d-h],++d,s)return"(?<"+s+">"}else if(n)return l=+n-1,f[p].names[l]?"\\k<"+f[p].names[l]+">":"\\"+(+n+h);return e})+")"}if(a){if(s=c[v],y[++v]=++d,s)return"(?<"+s+">"}else if(i)return l=+i-1,c[l]?"\\k<"+c[l]+">":"\\"+y[+i];return e}),e(s,l)}}},function(e,t){/*!
	 * XRegExp.matchRecursive 3.1.1
	 * <xregexp.com>
	 * Steven Levithan (c) 2009-2016 MIT License
	 */
e.exports=function(e){"use strict";function t(e,t,n,a){return{name:e,value:t,start:n,end:a}}e.matchRecursive=function(n,a,r,i,s){i=i||"",s=s||{};var o,l,h,c,p,u=i.indexOf("g")>-1,m=i.indexOf("y")>-1,f=i.replace(/y/g,""),d=s.escapeChar,v=s.valueNames,y=[],b=0,g=0,_=0,w=0;if(a=e(a,f),r=e(r,f),d){if(d.length>1)throw new Error("Cannot use more than one escape character");d=e.escape(d),p=new RegExp("(?:"+d+"[\\S\\s]|(?:(?!"+e.union([a,r]).source+")[^"+d+"])+)+",i.replace(/[^imu]+/g,""))}for(;;){if(d&&(_+=(e.exec(n,p,_,"sticky")||[""])[0].length),h=e.exec(n,a,_),c=e.exec(n,r,_),h&&c&&(h.index<=c.index?c=null:h=null),h||c)g=(h||c).index,_=g+(h||c)[0].length;else if(!b)break;if(m&&!b&&g>w)break;if(h)b||(o=g,l=_),++b;else{if(!c||!b)throw new Error("Unbalanced delimiter found in string");if(!--b&&(v?(v[0]&&o>w&&y.push(t(v[0],n.slice(w,o),w,o)),v[1]&&y.push(t(v[1],n.slice(o,l),o,l)),v[2]&&y.push(t(v[2],n.slice(l,g),l,g)),v[3]&&y.push(t(v[3],n.slice(g,_),g,_))):y.push(n.slice(l,g)),w=_,!u))break}g===_&&++_}return u&&!m&&v&&v[0]&&n.length>w&&y.push(t(v[0],n.slice(w),w,n.length)),y}}},function(e,t){/*!
	 * XRegExp Unicode Base 3.1.1
	 * <xregexp.com>
	 * Steven Levithan (c) 2008-2016 MIT License
	 */
e.exports=function(e){"use strict";function t(e){return e.replace(/[- _]+/g,"").toLowerCase()}function n(e){var t=/^\\[xu](.+)/.exec(e);return t?l(t[1]):e.charCodeAt("\\"===e.charAt(0)?1:0)}function a(t){var a="",r=-1;return e.forEach(t,/(\\x..|\\u....|\\?[\s\S])(?:-(\\x..|\\u....|\\?[\s\S]))?/,function(e){var t=n(e[1]);t>r+1&&(a+="\\u"+c(h(r+1)),t>r+2&&(a+="-\\u"+c(h(t-1)))),r=n(e[2]||e[1])}),r<65535&&(a+="\\u"+c(h(r+1)),r<65534&&(a+="-\\uFFFF")),a}function r(e){var t="b!";return o[e][t]||(o[e][t]=a(o[e].bmp))}function i(e,t){var n=o[e],a="";return n.bmp&&!n.isBmpLast&&(a="["+n.bmp+"]"+(n.astral?"|":"")),n.astral&&(a+=n.astral),n.isBmpLast&&n.bmp&&(a+=(n.astral?"|":"")+"["+n.bmp+"]"),t?"(?:(?!"+a+")(?:[-][-]|[\0-]))":"(?:"+a+")"}function s(e,t){var n=t?"a!":"a=";return o[e][n]||(o[e][n]=i(e,t))}var o={},l=e._dec,h=e._hex,c=e._pad4;e.addToken(/\\([pP])(?:{(\^?)([^}]*)}|([A-Za-z]))/,function(e,n,a){var i="Invalid double negation ",l="Unknown Unicode token ",h="Unicode token missing data ",c="Astral mode required for Unicode token ",p="Astral mode does not support Unicode tokens within character classes",u="P"===e[1]||!!e[2],m=a.indexOf("A")>-1,f=t(e[4]||e[3]),d=o[f];if("P"===e[1]&&e[2])throw new SyntaxError(i+e[0]);if(!o.hasOwnProperty(f))throw new SyntaxError(l+e[0]);if(d.inverseOf){if(f=t(d.inverseOf),!o.hasOwnProperty(f))throw new ReferenceError(h+e[0]+" -> "+d.inverseOf);d=o[f],u=!u}if(!d.bmp&&!m)throw new SyntaxError(c+e[0]);if(m){if("class"===n)throw new SyntaxError(p);return s(f,u)}return"class"===n?u?r(f):d.bmp:(u?"[^":"[")+d.bmp+"]"},{scope:"all",optionalFlags:"A",leadChar:"\\"}),e.addUnicodeData=function(n){var a,r,i="Unicode token requires name",s="Unicode token has no character data ";for(r=0;r<n.length;++r){if(a=n[r],!a.name)throw new Error(i);if(!(a.inverseOf||a.bmp||a.astral))throw new Error(s+a.name);o[t(a.name)]=a,a.alias&&(o[t(a.alias)]=a)}e.cache.flush("patterns")}}},function(e,t){/*!
	 * XRegExp Unicode Blocks 3.1.1
	 * <xregexp.com>
	 * Steven Levithan (c) 2010-2016 MIT License
	 * Unicode data by Mathias Bynens <mathiasbynens.be>
	 */
e.exports=function(e){"use strict";if(!e.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Blocks");e.addUnicodeData([{name:"InAegean_Numbers",astral:"[-]"},{name:"InAhom",astral:"[-]"},{name:"InAlchemical_Symbols",astral:"[-]"},{name:"InAlphabetic_Presentation_Forms",bmp:"-"},{name:"InAnatolian_Hieroglyphs",astral:"[-]"},{name:"InAncient_Greek_Musical_Notation",astral:"[-]"},{name:"InAncient_Greek_Numbers",astral:"[-]"},{name:"InAncient_Symbols",astral:"[-]"},{name:"InArabic",bmp:"-"},{name:"InArabic_Extended_A",bmp:"-"},{name:"InArabic_Mathematical_Alphabetic_Symbols",astral:"[-]"},{name:"InArabic_Presentation_Forms_A",bmp:"-"},{name:"InArabic_Presentation_Forms_B",bmp:"-\ufeff"},{name:"InArabic_Supplement",bmp:"-"},{name:"InArmenian",bmp:"-"},{name:"InArrows",bmp:"-"},{name:"InAvestan",astral:"[-]"},{name:"InBalinese",bmp:"-"},{name:"InBamum",bmp:"-"},{name:"InBamum_Supplement",astral:"[-]"},{name:"InBasic_Latin",bmp:"\0-"},{name:"InBassa_Vah",astral:"[-]"},{name:"InBatak",bmp:"-"},{name:"InBengali",bmp:"-"},{name:"InBlock_Elements",bmp:"-"},{name:"InBopomofo",bmp:"-"},{name:"InBopomofo_Extended",bmp:"-"},{name:"InBox_Drawing",bmp:"-"},{name:"InBrahmi",astral:"[-]"},{name:"InBraille_Patterns",bmp:"-"},{name:"InBuginese",bmp:"-"},{name:"InBuhid",bmp:"-"},{name:"InByzantine_Musical_Symbols",astral:"[-]"},{name:"InCJK_Compatibility",bmp:"-"},{name:"InCJK_Compatibility_Forms",bmp:"-"},{name:"InCJK_Compatibility_Ideographs",bmp:"-"},{name:"InCJK_Compatibility_Ideographs_Supplement",astral:"[-]"},{name:"InCJK_Radicals_Supplement",bmp:"-"},{name:"InCJK_Strokes",bmp:"-"},{name:"InCJK_Symbols_and_Punctuation",bmp:"-"},{name:"InCJK_Unified_Ideographs",bmp:"-"},{name:"InCJK_Unified_Ideographs_Extension_A",bmp:"-"},{name:"InCJK_Unified_Ideographs_Extension_B",astral:"[-][-]|[-]"},{name:"InCJK_Unified_Ideographs_Extension_C",astral:"[-]|[-][-]|[-]"},{name:"InCJK_Unified_Ideographs_Extension_D",astral:"[-]|[-]"},{name:"InCJK_Unified_Ideographs_Extension_E",astral:"[-][-]|[-]|[-]"},{name:"InCarian",astral:"[-]"},{name:"InCaucasian_Albanian",astral:"[-]"},{name:"InChakma",astral:"[-]"},{name:"InCham",bmp:"-"},{name:"InCherokee",bmp:"-"},{name:"InCherokee_Supplement",bmp:"-"},{name:"InCombining_Diacritical_Marks",bmp:"-"},{name:"InCombining_Diacritical_Marks_Extended",bmp:"-"},{name:"InCombining_Diacritical_Marks_Supplement",bmp:"-"},{name:"InCombining_Diacritical_Marks_for_Symbols",bmp:"-"},{name:"InCombining_Half_Marks",bmp:"-"},{name:"InCommon_Indic_Number_Forms",bmp:"-"},{name:"InControl_Pictures",bmp:"-"},{name:"InCoptic",bmp:"-"},{name:"InCoptic_Epact_Numbers",astral:"[-]"},{name:"InCounting_Rod_Numerals",astral:"[-]"},{name:"InCuneiform",astral:"[-]"},{name:"InCuneiform_Numbers_and_Punctuation",astral:"[-]"},{name:"InCurrency_Symbols",bmp:"-"},{name:"InCypriot_Syllabary",astral:"[-]"},{name:"InCyrillic",bmp:"-"},{name:"InCyrillic_Extended_A",bmp:"-"},{name:"InCyrillic_Extended_B",bmp:"-"},{name:"InCyrillic_Supplement",bmp:"-"},{name:"InDeseret",astral:"[-]"},{name:"InDevanagari",bmp:"-"},{name:"InDevanagari_Extended",bmp:"-"},{name:"InDingbats",bmp:"-"},{name:"InDomino_Tiles",astral:"[-]"},{name:"InDuployan",astral:"[-]"},{name:"InEarly_Dynastic_Cuneiform",astral:"[-]"},{name:"InEgyptian_Hieroglyphs",astral:"[-]|[-]"},{name:"InElbasan",astral:"[-]"},{name:"InEmoticons",astral:"[-]"},{name:"InEnclosed_Alphanumeric_Supplement",astral:"[-]"},{name:"InEnclosed_Alphanumerics",bmp:"-"},{name:"InEnclosed_CJK_Letters_and_Months",bmp:"-"},{name:"InEnclosed_Ideographic_Supplement",astral:"[-]"},{name:"InEthiopic",bmp:"-"},{name:"InEthiopic_Extended",bmp:"-"},{name:"InEthiopic_Extended_A",bmp:"-"},{name:"InEthiopic_Supplement",bmp:"-"},{name:"InGeneral_Punctuation",bmp:"-"},{name:"InGeometric_Shapes",bmp:"-"},{name:"InGeometric_Shapes_Extended",astral:"[-]"},{name:"InGeorgian",bmp:"-"},{name:"InGeorgian_Supplement",bmp:"-"},{name:"InGlagolitic",bmp:"-"},{name:"InGothic",astral:"[-]"},{name:"InGrantha",astral:"[-]"},{name:"InGreek_Extended",bmp:"-"},{name:"InGreek_and_Coptic",bmp:"-"},{name:"InGujarati",bmp:"-"},{name:"InGurmukhi",bmp:"-"},{name:"InHalfwidth_and_Fullwidth_Forms",bmp:"-"},{name:"InHangul_Compatibility_Jamo",bmp:"-"},{name:"InHangul_Jamo",bmp:"-"},{name:"InHangul_Jamo_Extended_A",bmp:"-"},{name:"InHangul_Jamo_Extended_B",bmp:"-"},{name:"InHangul_Syllables",bmp:"-"},{name:"InHanunoo",bmp:"-"},{name:"InHatran",astral:"[-]"},{name:"InHebrew",bmp:"-"},{name:"InHigh_Private_Use_Surrogates",bmp:"-"},{name:"InHigh_Surrogates",bmp:"-"},{name:"InHiragana",bmp:"-"},{name:"InIPA_Extensions",bmp:"-"},{name:"InIdeographic_Description_Characters",bmp:"-"},{name:"InImperial_Aramaic",astral:"[-]"},{name:"InInscriptional_Pahlavi",astral:"[-]"},{name:"InInscriptional_Parthian",astral:"[-]"},{name:"InJavanese",bmp:"-"},{name:"InKaithi",astral:"[-]"},{name:"InKana_Supplement",astral:"[-]"},{name:"InKanbun",bmp:"-"},{name:"InKangxi_Radicals",bmp:"-"},{name:"InKannada",bmp:"-"},{name:"InKatakana",bmp:"-"},{name:"InKatakana_Phonetic_Extensions",bmp:"-"},{name:"InKayah_Li",bmp:"-"},{name:"InKharoshthi",astral:"[-]"},{name:"InKhmer",bmp:"-"},{name:"InKhmer_Symbols",bmp:"-"},{name:"InKhojki",astral:"[-]"},{name:"InKhudawadi",astral:"[-]"},{name:"InLao",bmp:"-"},{name:"InLatin_Extended_Additional",bmp:"-"},{name:"InLatin_Extended_A",bmp:"-"},{name:"InLatin_Extended_B",bmp:"-"},{name:"InLatin_Extended_C",bmp:"-"},{name:"InLatin_Extended_D",bmp:"-"},{name:"InLatin_Extended_E",bmp:"-"},{name:"InLatin_1_Supplement",bmp:"-"},{name:"InLepcha",bmp:"-"},{name:"InLetterlike_Symbols",bmp:"-"},{name:"InLimbu",bmp:"-"},{name:"InLinear_A",astral:"[-]"},{name:"InLinear_B_Ideograms",astral:"[-]"},{name:"InLinear_B_Syllabary",astral:"[-]"},{name:"InLisu",bmp:"-"},{name:"InLow_Surrogates",bmp:"-"},{name:"InLycian",astral:"[-]"},{name:"InLydian",astral:"[-]"},{name:"InMahajani",astral:"[-]"},{name:"InMahjong_Tiles",astral:"[-]"},{name:"InMalayalam",bmp:"-"},{name:"InMandaic",bmp:"-"},{name:"InManichaean",astral:"[-]"},{name:"InMathematical_Alphanumeric_Symbols",astral:"[-]"},{name:"InMathematical_Operators",bmp:"-"},{name:"InMeetei_Mayek",bmp:"-"},{name:"InMeetei_Mayek_Extensions",bmp:"-"},{name:"InMende_Kikakui",astral:"[-]"},{name:"InMeroitic_Cursive",astral:"[-]"},{name:"InMeroitic_Hieroglyphs",astral:"[-]"},{name:"InMiao",astral:"[-]"},{name:"InMiscellaneous_Mathematical_Symbols_A",bmp:"-"},{name:"InMiscellaneous_Mathematical_Symbols_B",bmp:"-"},{name:"InMiscellaneous_Symbols",bmp:"-"},{name:"InMiscellaneous_Symbols_and_Arrows",bmp:"-"},{name:"InMiscellaneous_Symbols_and_Pictographs",astral:"[-]|[-]"},{name:"InMiscellaneous_Technical",bmp:"-"},{name:"InModi",astral:"[-]"},{name:"InModifier_Tone_Letters",bmp:"-"},{name:"InMongolian",bmp:"-"},{name:"InMro",astral:"[-]"},{name:"InMultani",astral:"[-]"},{name:"InMusical_Symbols",astral:"[-]"},{name:"InMyanmar",bmp:"-"},{name:"InMyanmar_Extended_A",bmp:"-"},{name:"InMyanmar_Extended_B",bmp:"-"},{name:"InNKo",bmp:"-"},{name:"InNabataean",astral:"[-]"},{name:"InNew_Tai_Lue",bmp:"-"},{name:"InNumber_Forms",bmp:"-"},{name:"InOgham",bmp:"-"},{name:"InOl_Chiki",bmp:"-"},{name:"InOld_Hungarian",astral:"[-]"},{name:"InOld_Italic",astral:"[-]"},{name:"InOld_North_Arabian",astral:"[-]"},{name:"InOld_Permic",astral:"[-]"},{name:"InOld_Persian",astral:"[-]"},{name:"InOld_South_Arabian",astral:"[-]"},{name:"InOld_Turkic",astral:"[-]"},{name:"InOptical_Character_Recognition",bmp:"-"},{name:"InOriya",bmp:"-"},{name:"InOrnamental_Dingbats",astral:"[-]"},{name:"InOsmanya",astral:"[-]"},{name:"InPahawh_Hmong",astral:"[-]"},{name:"InPalmyrene",astral:"[-]"},{name:"InPau_Cin_Hau",astral:"[-]"},{name:"InPhags_pa",bmp:"-"},{name:"InPhaistos_Disc",astral:"[-]"},{name:"InPhoenician",astral:"[-]"},{name:"InPhonetic_Extensions",bmp:"-"},{name:"InPhonetic_Extensions_Supplement",bmp:"-"},{name:"InPlaying_Cards",astral:"[-]"},{name:"InPrivate_Use_Area",bmp:"-"},{name:"InPsalter_Pahlavi",astral:"[-]"},{name:"InRejang",bmp:"-"},{name:"InRumi_Numeral_Symbols",astral:"[-]"},{name:"InRunic",bmp:"-"},{name:"InSamaritan",bmp:"-"},{name:"InSaurashtra",bmp:"-"},{name:"InSharada",astral:"[-]"},{name:"InShavian",astral:"[-]"},{name:"InShorthand_Format_Controls",astral:"[-]"},{name:"InSiddham",astral:"[-]"},{name:"InSinhala",bmp:"-"},{name:"InSinhala_Archaic_Numbers",astral:"[-]"},{name:"InSmall_Form_Variants",bmp:"-"},{name:"InSora_Sompeng",astral:"[-]"},{name:"InSpacing_Modifier_Letters",bmp:"-"},{name:"InSpecials",bmp:"-"},{name:"InSundanese",bmp:"-"},{name:"InSundanese_Supplement",bmp:"-"},{name:"InSuperscripts_and_Subscripts",bmp:"-"},{name:"InSupplemental_Arrows_A",bmp:"-"},{name:"InSupplemental_Arrows_B",bmp:"-"},{name:"InSupplemental_Arrows_C",astral:"[-]"},{name:"InSupplemental_Mathematical_Operators",bmp:"-"},{name:"InSupplemental_Punctuation",bmp:"-"},{name:"InSupplemental_Symbols_and_Pictographs",astral:"[-]"},{name:"InSupplementary_Private_Use_Area_A",astral:"[-][-]"},{name:"InSupplementary_Private_Use_Area_B",astral:"[-][-]"},{name:"InSutton_SignWriting",astral:"[-]"},{name:"InSyloti_Nagri",bmp:"-"},{name:"InSyriac",bmp:"-"},{name:"InTagalog",bmp:"-"},{name:"InTagbanwa",bmp:"-"},{name:"InTags",astral:"[-]"},{name:"InTai_Le",bmp:"-"},{name:"InTai_Tham",bmp:"-"},{name:"InTai_Viet",bmp:"-"},{name:"InTai_Xuan_Jing_Symbols",astral:"[-]"},{name:"InTakri",astral:"[-]"},{name:"InTamil",bmp:"-"},{name:"InTelugu",bmp:"-"},{name:"InThaana",bmp:"-"},{name:"InThai",bmp:"-"},{name:"InTibetan",bmp:"-"},{name:"InTifinagh",bmp:"-"},{name:"InTirhuta",astral:"[-]"},{name:"InTransport_and_Map_Symbols",astral:"[-]"},{name:"InUgaritic",astral:"[-]"},{name:"InUnified_Canadian_Aboriginal_Syllabics",bmp:"-"},{name:"InUnified_Canadian_Aboriginal_Syllabics_Extended",bmp:"-"},{name:"InVai",bmp:"-"},{name:"InVariation_Selectors",bmp:"-"},{name:"InVariation_Selectors_Supplement",astral:"[-]"},{name:"InVedic_Extensions",bmp:"-"},{name:"InVertical_Forms",bmp:"-"},{name:"InWarang_Citi",astral:"[-]"},{name:"InYi_Radicals",bmp:"-"},{name:"InYi_Syllables",bmp:"-"},{name:"InYijing_Hexagram_Symbols",bmp:"-"}])}},function(e,t){/*!
	 * XRegExp Unicode Categories 3.1.1
	 * <xregexp.com>
	 * Steven Levithan (c) 2010-2016 MIT License
	 * Unicode data by Mathias Bynens <mathiasbynens.be>
	 */
e.exports=function(e){"use strict";if(!e.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Categories");e.addUnicodeData([{name:"C",alias:"Other",isBmpLast:!0,bmp:"\0---------------------------------------------------------------------------------------------------------------------------------------------------------",astral:"[------]|[--]|[----------]|[-------]|[--]|[----]|[]|[-----]|[-------]|[----------------]|[-]|[------]|[-]|[--]|[----------------]|[-]|[-]|[-]|[--------][-]|[----]|[-----]|[-]|[-----------]|[---------------------]|[-]|[----]|[-]|[-]|[--------]|[-]"},{name:"Cc",alias:"Control",bmp:"\0--"},{name:"Cf",alias:"Format",bmp:"-----\ufeff-",astral:"[-]|[-]|[-]|"},{name:"Cn",alias:"Unassigned",bmp:"---------------------------------------------------------------------------------------------------------------------------------------------------",astral:"[---]|[-----]|[----------]|[-------]|[--]|[----]|[]|[-----]|[-------]|[----------------]|[-]|[------]|[][]|[-]|[----]|[-]|[-]|[-]|[--------][-]|[----]|[-----]|[-]|[--]|[-----------]|[---------------------]|[-]|[----------------]|[-]|[-]|[--------]|[-]"},{name:"Co",alias:"Private_Use",bmp:"-",astral:"[--][-]|[][-]"},{name:"Cs",alias:"Surrogate",bmp:"-"},{name:"L",alias:"Letter",bmp:"A-Za-z-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",astral:"[--]|[--]|[--]|[---]|[-]|[------]|[---------------]|[-]|[-]|[--]|[---][-]|[------]|[-------]|[-]|[--------------------]|[-------------------------]|[-------------------]|[-]|[--------------]|[--]|[-]|[----]|[]|[-]"},{name:"Ll",alias:"Lowercase_Letter",bmp:"a-z------------------------------------------------",astral:"[-]|[--------------------------]|[-]|[-]"},{name:"Lm",alias:"Modifier_Letter",bmp:"------------",astral:"[-]|[-]"},{name:"Lo",alias:"Other_Letter",bmp:"-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",astral:"[--]|[--]|[--]|[-]|[-]|[---------------]|[-]|[-]|[-]|[---][-]|[------]|[-]|[-]|[--------------------]|[-------------------]|[-]|[--------------]|[------]|[------]|[-]|[----]|[]|[-]"},{name:"Lt",alias:"Titlecase_Letter",bmp:"---"},{name:"Lu",alias:"Uppercase_Letter",bmp:"A-Z---------------------------------------",astral:"[-]|[-]|[-]|[-----------------------]"},{name:"M",alias:"Mark",bmp:"------------------------------------------------------------------------------------------------------------",astral:"[------]|[------]|[----------------]|[--]|[--]|[]|[-]|[----]|[---]|[-]|[-]"},{name:"Mc",alias:"Spacing_Mark",bmp:"-----------------------------",astral:"[-]|[------]|[-----]|[-]"},{name:"Me",alias:"Enclosing_Mark",bmp:"---"},{name:"Mn",alias:"Nonspacing_Mark",bmp:"-------------------------------------------------------------------------------",astral:"[-------]|[-----]|[--]|[-]|[]|[-]|[----]|[---]|[------------]|[-]|[-]"},{name:"N",alias:"Number",bmp:"0-9------------------------------------------------------------",astral:"[-----]|[-]|[--]|[-]|[-]|[---]|[-]|[------]|[-]|[-]|[-]|[-------------]|[----]"},{name:"Nd",alias:"Decimal_Number",bmp:"0-9------------------------------------",astral:"[-]|[-]|[----]|[-]|[-----]|[--]"},{name:"Nl",alias:"Letter_Number",bmp:"------",astral:"[-]|[--]"},{name:"No",alias:"Other_Number",bmp:"----------------------",astral:"[--]|[--]|[-]|[-]|[-]|[-------------]|[]|[-]|[-]|[----]"},{name:"P",alias:"Punctuation",bmp:"!-#%-\\x2A,-/:;\\x3F@\\x5B-\\x5D_\\x7B}-------------------------------------------------",astral:"[----]|[-]|[---]|[-]|||[------]|[-]|[-]"},{name:"Pc",alias:"Connector_Punctuation",bmp:"_-"},{name:"Pd",alias:"Dash_Punctuation",bmp:"\\x2D-"},{name:"Pe",alias:"Close_Punctuation",bmp:"\\x29\\x5D}"},{name:"Pf",alias:"Final_Punctuation",bmp:""},{name:"Pi",alias:"Initial_Punctuation",bmp:""},{name:"Po",alias:"Other_Punctuation",bmp:"!-#%-'\\x2A,\\x2E/:;\\x3F@\\x5C----------------------------------------------",astral:"[----]|[-]|[---]|[-]|||[------]|[-]|[-]"},{name:"Ps",alias:"Open_Punctuation",bmp:"\\x28\\x5B\\x7B"},{name:"S",alias:"Symbol",bmp:"\\x24\\x2B<->\\x5E`\\x7C~-------------------------------------------------------------------------",astral:"[-------]|[-------------]|[-------]|[]|[----]|||[]|[-]|[----]|[--------]|[]"},{name:"Sc",alias:"Currency_Symbol",bmp:"\\x24--"},{name:"Sk",alias:"Modifier_Symbol",bmp:"\\x5E`----------",astral:"[-]"},{name:"Sm",alias:"Math_Symbol",bmp:"\\x2B<->\\x7C~---------------------",astral:"[]|[]"},{name:"So",alias:"Other_Symbol",bmp:"-----------------------------------------------------------",astral:"[-------]|[-------]|[-------------]|[----]|||[]|[-]|[----]|[--------]"},{name:"Z",alias:"Separator",bmp:" -\u2028\u2029"},{name:"Zl",alias:"Line_Separator",bmp:"\u2028"},{name:"Zp",alias:"Paragraph_Separator",bmp:"\u2029"},{name:"Zs",alias:"Space_Separator",bmp:" -"}])}},function(e,t){/*!
	 * XRegExp Unicode Properties 3.1.1
	 * <xregexp.com>
	 * Steven Levithan (c) 2012-2016 MIT License
	 * Unicode data by Mathias Bynens <mathiasbynens.be>
	 */
e.exports=function(e){"use strict";if(!e.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Properties");var t=[{name:"ASCII",bmp:"\0-"},{name:"Alphabetic",bmp:"A-Za-z-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",astral:"[--]|[---------------------]|[--]|[--]|[---]|[-]|[-------]|[------]|[---]|[-]|[-]|[---][-]|[-------------------------]|[----]|[-]|[--------------]|[--------]|[--]|[--]|[----------------]|[---------------------]|[-]|[]|[---]|[-]"},{name:"Any",isBmpLast:!0,bmp:"\0-",astral:"[-][-]"},{name:"Default_Ignorable_Code_Point",bmp:"-----\ufeff-",astral:"[-][-]|[-]|[-]"},{name:"Lowercase",bmp:"a-z----------------------------------------------------",astral:"[-]|[--------------------------]|[-]|[-]"},{name:"Noncharacter_Code_Point",bmp:"-",astral:"[][]"},{name:"Uppercase",bmp:"A-Z-----------------------------------------",astral:"[-]|[-]|[-----------------------]|[-]|[---]"},{name:"White_Space",bmp:"\t-\r -\u2028\u2029"}];t.push({name:"Assigned",inverseOf:"Cn"}),e.addUnicodeData(t)}},function(e,t){/*!
	 * XRegExp Unicode Scripts 3.1.1
	 * <xregexp.com>
	 * Steven Levithan (c) 2010-2016 MIT License
	 * Unicode data by Mathias Bynens <mathiasbynens.be>
	 */
e.exports=function(e){"use strict";if(!e.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Scripts");e.addUnicodeData([{name:"Ahom",astral:"[---]"},{name:"Anatolian_Hieroglyphs",astral:"[-]"},{name:"Arabic",bmp:"------------------",astral:"[-]|[--------------]"},{name:"Armenian",bmp:"-----"},{name:"Avestan",astral:"[--]"},{name:"Balinese",bmp:"--"},{name:"Bamum",bmp:"-",astral:"[-]"},{name:"Bassa_Vah",astral:"[--]"},{name:"Batak",bmp:"--"},{name:"Bengali",bmp:"---------"},{name:"Bopomofo",bmp:"--"},{name:"Brahmi",astral:"[--]"},{name:"Braille",bmp:"-"},{name:"Buginese",bmp:"-"},{name:"Buhid",bmp:"-"},{name:"Canadian_Aboriginal",bmp:"--"},{name:"Carian",astral:"[-]"},{name:"Caucasian_Albanian",astral:"[-]"},{name:"Chakma",astral:"[--]"},{name:"Cham",bmp:"----"},{name:"Cherokee",bmp:"---"},{name:"Common",bmp:"\0-@\\x5B-`\\x7B---------------------------------------------------\ufeff------",astral:"[-------]|[-]|[----------------]|[-]|[-------]|[------]|[--------]|[--------------]"},{name:"Coptic",bmp:"---"},{name:"Cuneiform",astral:"[---]|[-]"},{name:"Cypriot",astral:"[--]"},{name:"Cyrillic",bmp:"----"},{name:"Deseret",astral:"[-]"},{name:"Devanagari",bmp:"----"},{name:"Duployan",astral:"[-----]"},{name:"Egyptian_Hieroglyphs",astral:"[-]|[-]"},{name:"Elbasan",astral:"[-]"},{name:"Ethiopic",bmp:"------------------------------"},{name:"Georgian",bmp:"----"},{name:"Glagolitic",bmp:"--"},{name:"Gothic",astral:"[-]"},{name:"Grantha",astral:"[----------]"},{name:"Greek",bmp:"-----------------------",astral:"[-]|[-]"},{name:"Gujarati",bmp:"-----------"},{name:"Gurmukhi",bmp:"--------"},{name:"Han",bmp:"---------",astral:"[--]|[---][-]|[--]|[-]|[--]|[-]"},{name:"Hangul",bmp:"-------------"},{name:"Hanunoo",bmp:"-"},{name:"Hatran",astral:"[--]"},{name:"Hebrew",bmp:"------"},{name:"Hiragana",bmp:"--",astral:"|"},{name:"Imperial_Aramaic",astral:"[--]"},{name:"Inherited",bmp:"------------",astral:"[----]|[]|[-]"},{name:"Inscriptional_Pahlavi",astral:"[--]"},{name:"Inscriptional_Parthian",astral:"[--]"},{name:"Javanese",bmp:"--"},{name:"Kaithi",astral:"[-]"},{name:"Kannada",bmp:"-----------"},{name:"Katakana",bmp:"-------",astral:""},{name:"Kayah_Li",bmp:"-"},{name:"Kharoshthi",astral:"[-------]"},{name:"Khmer",bmp:"----"},{name:"Khojki",astral:"[--]"},{name:"Khudawadi",astral:"[--]"},{name:"Lao",bmp:"---------"},{name:"Latin",bmp:"A-Za-z----------------------"},{name:"Lepcha",bmp:"---"},{name:"Limbu",bmp:"----"},{name:"Linear_A",astral:"[---]"},{name:"Linear_B",astral:"[------]"},{name:"Lisu",bmp:"-"},{name:"Lycian",astral:"[-]"},{name:"Lydian",astral:"[-]"},{name:"Mahajani",astral:"[-]"},{name:"Malayalam",bmp:"----------"},{name:"Mandaic",bmp:"-"},{name:"Manichaean",astral:"[--]"},{name:"Meetei_Mayek",bmp:"---"},{name:"Mende_Kikakui",astral:"[--]"},{name:"Meroitic_Cursive",astral:"[---]"},{name:"Meroitic_Hieroglyphs",astral:"[-]"},{name:"Miao",astral:"[---]"},{name:"Modi",astral:"[--]"},{name:"Mongolian",bmp:"----"},{name:"Mro",astral:"[--]"},{name:"Multani",astral:"[----]"},{name:"Myanmar",bmp:"---"},{name:"Nabataean",astral:"[--]"},{name:"New_Tai_Lue",bmp:"---"},{name:"Nko",bmp:"-"},{name:"Ogham",bmp:"-"},{name:"Ol_Chiki",bmp:"-"},{name:"Old_Hungarian",astral:"[---]"},{name:"Old_Italic",astral:"[-]"},{name:"Old_North_Arabian",astral:"[-]"},{name:"Old_Permic",astral:"[-]"},{name:"Old_Persian",astral:"[--]"},{name:"Old_South_Arabian",astral:"[-]"},{name:"Old_Turkic",astral:"[-]"},{name:"Oriya",bmp:"---------"},{name:"Osmanya",astral:"[--]"},{name:"Pahawh_Hmong",astral:"[-----]"},{name:"Palmyrene",astral:"[-]"},{name:"Pau_Cin_Hau",astral:"[-]"},{name:"Phags_Pa",bmp:"-"},{name:"Phoenician",astral:"[-]"},{name:"Psalter_Pahlavi",astral:"[---]"},{name:"Rejang",bmp:"-"},{name:"Runic",bmp:"--"},{name:"Samaritan",bmp:"--"},{name:"Saurashtra",bmp:"--"},{name:"Sharada",astral:"[--]"},{name:"Shavian",astral:"[-]"},{name:"Siddham",astral:"[--]"},{name:"SignWriting",astral:"[---]"},{name:"Sinhala",bmp:"--------",astral:"[-]"},{name:"Sora_Sompeng",astral:"[--]"},{name:"Sundanese",bmp:"--"},{name:"Syloti_Nagri",bmp:"-"},{name:"Syriac",bmp:"---"},{name:"Tagalog",bmp:"--"},{name:"Tagbanwa",bmp:"--"},{name:"Tai_Le",bmp:"--"},{name:"Tai_Tham",bmp:"-----"},{name:"Tai_Viet",bmp:"--"},{name:"Takri",astral:"[--]"},{name:"Tamil",bmp:"---------"},{name:"Telugu",bmp:"------------"},{name:"Thaana",bmp:"-"},{name:"Thai",bmp:"--"},{name:"Tibetan",bmp:"------"},{name:"Tifinagh",bmp:"-"},{name:"Tirhuta",astral:"[--]"},{name:"Ugaritic",astral:"[-]"},{name:"Vai",bmp:"-"},{name:"Warang_Citi",astral:"[-]"},{name:"Yi",bmp:"--"}])}},function(e,t,n){/**
	 * @desc Validation errors.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";function a(e){this.msg=e}function r(e,t){a.call(this,e),this.name=t}function i(){r.apply(this,arguments)}function s(){r.apply(this,arguments)}function o(){r.apply(this,arguments)}function l(e,t){a.call(this,""),this.namesA=e,this.namesB=t}var h=n(6),c=h.inherit;a.prototype.toString=function(){return this.msg},a.prototype.getNames=function(){return[]},a.prototype.toStringWithNames=function(e){return this.msg},c(r,a),r.prototype.toString=function(){return this.toStringWithNames([this.name])},r.prototype.getNames=function(){return[this.name]},r.prototype.toStringWithNames=function(e){return this.msg+": "+e[0]},c(i,r),c(s,r),c(o,r),c(l,a),l.prototype.toString=function(){return this.toStringWithNames(this.namesA.concat(this.namesB))},l.prototype.getNames=function(){return this.namesA.concat(this.namesB)},l.prototype.toStringWithNames=function(e){var t=e.slice(0,this.namesA.length),n=e.slice(this.namesA.length);return"must choose either "+t.join(", ")+" or "+n.join(", ")},t.ValidationError=a,t.ChoiceError=l,t.ElementNameError=o,t.AttributeNameError=i,t.AttributeValueError=s},function(e,t,n){/**
	 * @desc Classes that model RNG patterns that pertain to names.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";function a(e){this.path=e}function r(e,t,n){a.call(this,e),this.ns=t,this.name=n}function i(e,t){a.call(this,e),this.a=t[0],this.b=t[1]}function s(e,t,n){a.call(this,e),this.ns=t,this.except=n}function o(e,t){a.call(this,e),this.except=t}var l=n(6);a.prototype.match=function(e,t){throw new Error("subclasses must implement this method.")},a.prototype.wildcardMatch=function(e,t){throw new Error("subclasses must implement this method.")},a.prototype.simple=function(){throw new Error("subclasses must implement this method.")},a.prototype.getNamespaces=function(){var e=Object.create(null);return this._recordNamespaces(e),Object.keys(e)},a.prototype._recordNamespaces=function(e){throw new Error("subclasses must implement this method.")},a.prototype.toObject=function(){throw new Error("subclasses must implement this method.")},a.prototype.toJSON=function(){return this.toObject()},a.prototype.toArray=function(){throw new Error("subclasses must implement this method.")},a.prototype.toString=function(){return JSON.stringify(this)},l.inherit(r,a),r.prototype.match=function(e,t){return this.ns===e&&this.name===t},r.prototype.wildcardMatch=function(e,t){return!1},r.prototype.toObject=function(){return{ns:this.ns,name:this.name}},r.prototype.simple=function(){return!0},r.prototype.toArray=function(){return[this]},r.prototype._recordNamespaces=function(e){e[this.ns]=1},l.inherit(i,a),i.prototype.match=function(e,t){return this.a.match(e,t)||this.b.match(e,t)},i.prototype.wildcardMatch=function(e,t){return this.a.wildcardMatch(e,t)||this.b.wildcardMatch(e,t)},i.prototype.toObject=function(){return{a:this.a.toObject(),b:this.b.toObject()}},i.prototype.simple=function(){return this.a.simple()&&this.b.simple()},i.prototype.toArray=function(){var e=this.a.toArray();if(!e)return null;var t=this.b.toArray();return t?e.concat(t):null},i.prototype._recordNamespaces=function(e){this.a._recordNamespaces(e),this.b._recordNamespaces(e)},l.inherit(s,a),s.prototype.match=function(e,t){return this.ns===e&&!(this.except&&this.except.match(e,t))},s.prototype.wildcardMatch=function(e,t){return this.match(e,t)},s.prototype.toObject=function(){var e={ns:this.ns};return this.except&&(e.except=this.except.toObject()),e},s.prototype.simple=function(){return!1},s.prototype.toArray=function(){return null},s.prototype._recordNamespaces=function(e){e[this.ns]=1,this.except&&(e["::except"]=1)},l.inherit(o,a),o.prototype.match=function(e,t){return!this.except||!this.except.match(e,t)},o.prototype.wildcardMatch=function(e,t){return this.match(e,t)},o.prototype.toObject=function(){var e={pattern:"AnyName"};return this.except&&(e.except=this.except.toObject()),e},o.prototype.simple=function(){return!1},o.prototype.toArray=function(){return null},o.prototype._recordNamespaces=function(e){e["*"]=1,this.except&&(e["::except"]=1)},t.Name=r,t.NameChoice=i,t.NsName=s,t.AnyName=o},function(e,t,n){/**
	 * @desc This module contains data and utilities to work with the
	 * schema format that salve uses natively.
	 * @author Louis-Dominique Dubeau
	 * @license MPL 2.0
	 * @copyright Mangalam Research Center for Buddhist Languages
	 */
"use strict";function a(){Error.call(this,"your schema file must be recreated with a newer version of salve-convert")}function r(e){this.options=e}function i(){r.apply(this,arguments)}function s(e){var t=JSON.parse(e);if("object"==typeof t&&!t.v)throw new a;var n=t.v,r=t.o;if(3===n)return new i(r).walkObject(t.d,r);throw new Error("unknown version: "+n)}var o=n(6).inherit,l=n(1),h=l.__protected,c=[Array,h.Empty,h.Data,h.List,h.Param,h.Value,h.NotAllowed,h.Text,h.Ref,h.OneOrMore,h.Choice,h.Group,h.Attribute,h.Element,h.Define,h.Grammar,h.EName,h.Interleave,h.Name,h.NameChoice,h.NsName,h.AnyName],p={0:Array,Empty:h.Empty,1:h.Empty,Data:h.Data,2:h.Data,List:h.List,3:h.List,Param:h.Param,4:h.Param,Value:h.Value,5:h.Value,NotAllowed:h.NotAllowed,6:h.NotAllowed,Text:h.Text,7:h.Text,Ref:h.Ref,8:h.Ref,OneOrMore:h.OneOrMore,9:h.OneOrMore,Choice:h.Choice,10:h.Choice,Group:h.Group,11:h.Group,Attribute:h.Attribute,12:h.Attribute,Element:h.Element,13:h.Element,Define:h.Define,14:h.Define,Grammar:h.Grammar,15:h.Grammar,EName:h.EName,16:h.EName,Interleave:h.Interleave,17:h.Interleave,Name:h.Name,18:h.Name,NameChoice:h.NameChoice,19:h.NameChoice,NsName:h.NsName,20:h.NsName,AnyName:h.AnyName,21:h.AnyName},u=1;o(a,Error),r.prototype.walkObject=function(e){var t=e[0],n=c[t];if(void 0===n){if(e.length<1)throw new Error("array too small to contain object");throw new Error("undefined type: "+t)}if(n===Array)throw new Error("trying to build array with _constructObjectV2");var a,r=this.options&u&&n!==h.EName;return e.length>1?(a=e.slice(1),r?a.unshift(0,""):a.unshift(0),this._transformArray(a)):a=r?[""]:[],this._processObject(n,a)},r.prototype._processObject=function(e,t){},r.prototype._transformArray=function(e){if(0!==e[0])throw new Error("array type not 0, but "+e[0]+" for array "+e);e.splice(0,1);for(var t=e.length,n=0;n<t;n++){var a=e[n];a instanceof Array&&(0!==a[0]?e[n]=this.walkObject(a):this._transformArray(a))}},o(i,r),i.prototype._processObject=function(e,t){if(e===h.Data&&t.length>=4){var n=t[3];if(n.length%2!==0)throw new Error("parameter array length not a multiple of 2");for(var a=new Array(n.length/2),r=0,i=n.length;r<i;r+=2)a[r/2]={name:n[r],value:n[r+1]};t[3]=a}var s=Object.create(e.prototype),o=e.apply(s,t);return void 0!==o?o:s},t.constructTree=s,t.__protected={V2JSONWalker:r,nameToConstructor:p,OPTION_NO_PATHS:u}}])});
//# sourceMappingURL=salve.min.map.js